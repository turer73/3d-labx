---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import Header from "../../../components/Header.astro";
import { getApiBase } from "../../../lib/api";

export const prerender = false;

const { slug } = Astro.params;
const API_BASE = getApiBase(Astro.request);

// Malzeme verileri
const materials: Record<string, any> = {
  pla: {
    id: "pla",
    name: "PLA",
    fullName: "Polylactic Acid",
    icon: "ğŸŒ±",
    color: "#22C55E",
    difficulty: 1,
    durability: 2,
    flexibility: 1,
    heatResistance: 60,
    nozzleTemp: "190-220Â°C",
    bedTemp: "50-60Â°C",
    printSpeed: "40-60 mm/s",
    fanSpeed: "100%",
    retraction: "4-6mm @ 25-45mm/s",
    layerHeight: "0.1-0.3mm",
    infill: "15-20%",
    pros: ["Kokusuz baskÄ±", "Biyobozunur", "Kolay kullanÄ±m", "DÃ¼ÅŸÃ¼k warping", "GeniÅŸ renk seÃ§eneÄŸi"],
    cons: ["IsÄ±ya dayanÄ±ksÄ±z (60Â°C)", "KÄ±rÄ±lgan", "UV'ye duyarlÄ±", "Nem Ã§eker"],
    idealFor: ["Dekoratif objeler", "Prototip", "FigÃ¼rinler", "EÄŸitim projeleri", "Masa Ã¼stÃ¼ sÃ¼sler"],
    notFor: ["DÄ±ÅŸ mekan kullanÄ±mÄ±", "SÄ±cak ortamlar", "Mekanik parÃ§alar"],
    tips: "BaÅŸlangÄ±Ã§ iÃ§in en ideal filament. HavalandÄ±rma gerektirmez. Ä°lk katman iÃ§in yatak sÄ±caklÄ±ÄŸÄ±nÄ± 5Â°C artÄ±rÄ±n.",
    priceRange: "â‚º450-700/kg",
    description: "PLA (Polylactic Acid), mÄ±sÄ±r niÅŸastasÄ± veya ÅŸeker kamÄ±ÅŸÄ±ndan Ã¼retilen biyobozunur bir termoplastiktir. 3D baskÄ±da en yaygÄ±n kullanÄ±lan filament tÃ¼rÃ¼dÃ¼r ve yeni baÅŸlayanlar iÃ§in ideal bir seÃ§imdir.",
    commonProblems: [
      { problem: "Warping (kÃ¶ÅŸe kalkmasÄ±)", solution: "Yatak sÄ±caklÄ±ÄŸÄ±nÄ± artÄ±rÄ±n, brim kullanÄ±n, oda sÄ±caklÄ±ÄŸÄ±nÄ± kontrol edin" },
      { problem: "Stringing (ipliklenme)", solution: "Retraction mesafesini artÄ±rÄ±n, sÄ±caklÄ±ÄŸÄ± 5Â°C dÃ¼ÅŸÃ¼rÃ¼n" },
      { problem: "Ä°lk katman yapÄ±ÅŸmÄ±yor", solution: "Yatak seviyesini kontrol edin, yatak sÄ±caklÄ±ÄŸÄ±nÄ± artÄ±rÄ±n, yapÄ±ÅŸkan kullanÄ±n" },
      { problem: "Katman ayrÄ±lmasÄ±", solution: "BaskÄ± sÄ±caklÄ±ÄŸÄ±nÄ± artÄ±rÄ±n, baskÄ± hÄ±zÄ±nÄ± dÃ¼ÅŸÃ¼rÃ¼n" }
    ],
    brands: ["Elas 3D", "Filamix", "Porima", "Microzey", "Beta Filament"],
    materialFilter: "PLA"
  },
  petg: {
    id: "petg",
    name: "PETG",
    fullName: "Polyethylene Terephthalate Glycol",
    icon: "ğŸ’§",
    color: "#3B82F6",
    difficulty: 2,
    durability: 4,
    flexibility: 2,
    heatResistance: 80,
    nozzleTemp: "220-250Â°C",
    bedTemp: "70-80Â°C",
    printSpeed: "30-50 mm/s",
    fanSpeed: "50-70%",
    retraction: "3-5mm @ 25-40mm/s",
    layerHeight: "0.1-0.3mm",
    infill: "15-25%",
    pros: ["DayanÄ±klÄ±", "Kimyasallara direnÃ§li", "GÄ±daya uygun", "Åeffaf baskÄ± mÃ¼mkÃ¼n", "DÃ¼ÅŸÃ¼k warping"],
    cons: ["String yapabilir", "Nem Ã§eker", "YÃ¼zey pÃ¼rÃ¼zlÃ¼ olabilir", "YavaÅŸ soÄŸur"],
    idealFor: ["Mekanik parÃ§alar", "Su ÅŸiÅŸeleri", "GÄ±da kaplarÄ±", "Fonksiyonel parÃ§alar", "Koruyucu kÄ±lÄ±flar"],
    notFor: ["YÃ¼ksek sÄ±caklÄ±k uygulamalarÄ±", "Hassas detay gerektiren iÅŸler"],
    tips: "PLA'dan sonra Ã¶ÄŸrenilecek en iyi filament. BaskÄ± hÄ±zÄ±nÄ± dÃ¼ÅŸÃ¼k tutun ve fan hÄ±zÄ±nÄ± %50-70 arasÄ±nda ayarlayÄ±n.",
    priceRange: "â‚º470-800/kg",
    description: "PETG, PET plastik ile glikol modifikasyonunun birleÅŸiminden oluÅŸan dayanÄ±klÄ± ve esnek bir termoplastiktir. Su ÅŸiÅŸelerinde kullanÄ±lan malzemenin 3D baskÄ±ya uygun versiyonudur.",
    commonProblems: [
      { problem: "AÅŸÄ±rÄ± stringing", solution: "SÄ±caklÄ±ÄŸÄ± dÃ¼ÅŸÃ¼rÃ¼n, retraction ayarlarÄ±nÄ± artÄ±rÄ±n, travel hÄ±zÄ±nÄ± artÄ±rÄ±n" },
      { problem: "YataÄŸa yapÄ±ÅŸma (Ã§ok fazla)", solution: "Yatak sÄ±caklÄ±ÄŸÄ±nÄ± dÃ¼ÅŸÃ¼rÃ¼n, release agent kullanÄ±n" },
      { problem: "KabarcÄ±klar/tÄ±kanma", solution: "Filamenti kurutun, nem Ã§ekmiÅŸ olabilir" },
      { problem: "ZayÄ±f katman yapÄ±ÅŸmasÄ±", solution: "SÄ±caklÄ±ÄŸÄ± artÄ±rÄ±n, fan hÄ±zÄ±nÄ± dÃ¼ÅŸÃ¼rÃ¼n" }
    ],
    brands: ["Elas 3D", "Filamix", "Porima", "Microzey"],
    materialFilter: "PETG"
  },
  abs: {
    id: "abs",
    name: "ABS",
    fullName: "Acrylonitrile Butadiene Styrene",
    icon: "ğŸ”§",
    color: "#EF4444",
    difficulty: 3,
    durability: 4,
    flexibility: 2,
    heatResistance: 100,
    nozzleTemp: "220-250Â°C",
    bedTemp: "95-110Â°C",
    printSpeed: "40-60 mm/s",
    fanSpeed: "0-30%",
    retraction: "5-7mm @ 30-50mm/s",
    layerHeight: "0.1-0.3mm",
    infill: "20-30%",
    pros: ["IsÄ±ya dayanÄ±klÄ±", "Darbeciye dayanÄ±klÄ±", "Aseton ile iÅŸlenebilir", "Lego malzemesi", "Profesyonel gÃ¶rÃ¼nÃ¼m"],
    cons: ["Koku yapar", "Warping problemi", "KapalÄ± hacim gerektirir", "Zehirli duman"],
    idealFor: ["Otomotiv parÃ§alarÄ±", "Aletler", "Elektronik kutularÄ±", "Mekanik parÃ§alar", "Prototip"],
    notFor: ["GÄ±da temasÄ±", "Ä°yi havalandÄ±rma olmayan ortamlar", "AÃ§Ä±k hacimli yazÄ±cÄ±lar"],
    tips: "KapalÄ± hacimli yazÄ±cÄ± Ã¶nerilir. Ä°yi havalandÄ±rma ÅŸart! Yatak yapÄ±ÅŸtÄ±rÄ±cÄ±sÄ± kullanÄ±n.",
    priceRange: "â‚º530-750/kg",
    description: "ABS, endÃ¼striyel uygulamalarda yaygÄ±n olarak kullanÄ±lan dayanÄ±klÄ± bir termoplastiktir. LEGO parÃ§alarÄ±nÄ±n yapÄ±ldÄ±ÄŸÄ± malzemedir ve mÃ¼kemmel mekanik Ã¶zelliklere sahiptir.",
    commonProblems: [
      { problem: "Åiddetli warping", solution: "KapalÄ± hacim kullanÄ±n, raft/brim ekleyin, yatak yapÄ±ÅŸtÄ±rÄ±cÄ±sÄ± kullanÄ±n" },
      { problem: "Katman Ã§atlamasÄ±", solution: "Oda sÄ±caklÄ±ÄŸÄ±nÄ± artÄ±rÄ±n, fan kapatÄ±n, enclosure kullanÄ±n" },
      { problem: "KÃ¶tÃ¼ koku", solution: "Ä°yi havalandÄ±rma saÄŸlayÄ±n, filtre kullanÄ±n" },
      { problem: "KÃ¶ÅŸelerde kalkma", solution: "Ä°lk katman yÃ¼ksekliÄŸini artÄ±rÄ±n, yapÄ±ÅŸtÄ±rÄ±cÄ± kullanÄ±n" }
    ],
    brands: ["Filamix", "Valment"],
    materialFilter: "ABS"
  },
  asa: {
    id: "asa",
    name: "ASA",
    fullName: "Acrylonitrile Styrene Acrylate",
    icon: "â˜€ï¸",
    color: "#F97316",
    difficulty: 3,
    durability: 4,
    flexibility: 2,
    heatResistance: 100,
    nozzleTemp: "240-260Â°C",
    bedTemp: "90-110Â°C",
    printSpeed: "40-50 mm/s",
    fanSpeed: "0-20%",
    retraction: "5-7mm @ 30-50mm/s",
    layerHeight: "0.1-0.3mm",
    infill: "20-30%",
    pros: ["UV dayanÄ±klÄ±", "DÄ±ÅŸ mekan iÃ§in ideal", "Kimyasallara direnÃ§li", "ABS'den daha az warping", "Hava koÅŸullarÄ±na dayanÄ±klÄ±"],
    cons: ["PahalÄ±", "Koku yapar", "KapalÄ± hacim gerektirir", "Zehirli duman"],
    idealFor: ["DÄ±ÅŸ mekan parÃ§alarÄ±", "Araba aksesuarlarÄ±", "BahÃ§e malzemeleri", "Tabela/iÅŸaretler", "GÃ¼neÅŸ gÃ¶ren parÃ§alar"],
    notFor: ["GÄ±da temasÄ±", "KapalÄ± ortam baskÄ±sÄ±", "BÃ¼tÃ§e sÄ±nÄ±rlÄ± projeler"],
    tips: "DÄ±ÅŸ mekanda kullanÄ±lacak parÃ§alar iÃ§in en iyi seÃ§im. ABS gibi baskÄ± ayarlarÄ± kullanÄ±n.",
    priceRange: "â‚º650-1800/kg",
    description: "ASA, ABS'nin UV dayanÄ±klÄ± versiyonudur. GÃ¼neÅŸ Ä±ÅŸÄ±ÄŸÄ±na maruz kalacak dÄ±ÅŸ mekan uygulamalarÄ± iÃ§in idealdir ve renk solmasÄ± olmaz.",
    commonProblems: [
      { problem: "Warping", solution: "KapalÄ± hacim kullanÄ±n, yatak yapÄ±ÅŸtÄ±rÄ±cÄ±sÄ± kullanÄ±n" },
      { problem: "Katman ayrÄ±lmasÄ±", solution: "Oda sÄ±caklÄ±ÄŸÄ±nÄ± artÄ±rÄ±n, fan kapatÄ±n" },
      { problem: "KÃ¶tÃ¼ koku", solution: "Ä°yi havalandÄ±rma saÄŸlayÄ±n" },
      { problem: "Ä°lk katman yapÄ±ÅŸmÄ±yor", solution: "Yatak sÄ±caklÄ±ÄŸÄ±nÄ± artÄ±rÄ±n, PEI sheet veya kapton kullanÄ±n" }
    ],
    brands: ["Filamix"],
    materialFilter: "ASA"
  },
  tpu: {
    id: "tpu",
    name: "TPU",
    fullName: "Thermoplastic Polyurethane",
    icon: "ğŸƒ",
    color: "#8B5CF6",
    difficulty: 4,
    durability: 3,
    flexibility: 5,
    heatResistance: 80,
    nozzleTemp: "210-230Â°C",
    bedTemp: "30-60Â°C",
    printSpeed: "15-30 mm/s",
    fanSpeed: "50-100%",
    retraction: "0-2mm @ 15-25mm/s (Direct Drive)",
    layerHeight: "0.15-0.3mm",
    infill: "10-20%",
    pros: ["Esnek", "Darbe emici", "AÅŸÄ±nmaya dayanÄ±klÄ±", "KauÃ§uk benzeri", "Kimyasallara direnÃ§li"],
    cons: ["BaskÄ±sÄ± zor", "YavaÅŸ baskÄ± gerektirir", "Direct drive Ã¶nerilir", "Retraction zor"],
    idealFor: ["Telefon kÄ±lÄ±flarÄ±", "AyakkabÄ± tabanÄ±", "Tamponlar", "Contalar", "Tekerlekler"],
    notFor: ["HÄ±zlÄ± baskÄ± gerektiren iÅŸler", "Bowden extruder'lÄ± yazÄ±cÄ±lar", "Hassas tolerans gerektiren iÅŸler"],
    tips: "Bowden extruder ile zor. Direct drive ve yavaÅŸ baskÄ± hÄ±zÄ± ÅŸart. Retraction'Ä± minimumda tutun.",
    priceRange: "â‚º700-1200/kg",
    description: "TPU, kauÃ§uk benzeri esnekliÄŸe sahip bir termoplastiktir. Shore sertlik deÄŸerine gÃ¶re farklÄ± esneklik seviyeleri sunar (95A en yaygÄ±n).",
    commonProblems: [
      { problem: "Filament dolanmasÄ±", solution: "Ã‡ok yavaÅŸ basÄ±n, direct drive kullanÄ±n" },
      { problem: "Stringing", solution: "Retraction'Ä± azaltÄ±n veya kapatÄ±n, travel hÄ±zÄ±nÄ± artÄ±rÄ±n" },
      { problem: "Extrusion problemleri", solution: "BaskÄ± hÄ±zÄ±nÄ± dÃ¼ÅŸÃ¼rÃ¼n, nozzle sÄ±caklÄ±ÄŸÄ±nÄ± artÄ±rÄ±n" },
      { problem: "ZayÄ±f katman yapÄ±ÅŸmasÄ±", solution: "SÄ±caklÄ±ÄŸÄ± artÄ±rÄ±n, hÄ±zÄ± dÃ¼ÅŸÃ¼rÃ¼n" }
    ],
    brands: ["Nanelab"],
    materialFilter: "TPU"
  },
  nylon: {
    id: "nylon",
    name: "Nylon",
    fullName: "Polyamide (PA)",
    icon: "âš™ï¸",
    color: "#6366F1",
    difficulty: 5,
    durability: 5,
    flexibility: 3,
    heatResistance: 120,
    nozzleTemp: "240-270Â°C",
    bedTemp: "70-90Â°C",
    printSpeed: "30-50 mm/s",
    fanSpeed: "0-30%",
    retraction: "3-5mm @ 30-45mm/s",
    layerHeight: "0.15-0.3mm",
    infill: "25-40%",
    pros: ["Ã‡ok dayanÄ±klÄ±", "AÅŸÄ±nmaya direnÃ§li", "Kimyasallara direnÃ§li", "Profesyonel kalite", "DÃ¼ÅŸÃ¼k sÃ¼rtÃ¼nme"],
    cons: ["Ã‡ok nem Ã§eker", "Zor baskÄ±", "Warping problemi", "PahalÄ±", "Kurutma gerektirir"],
    idealFor: ["DiÅŸliler", "MenteÅŸeler", "Yataklar", "EndÃ¼striyel parÃ§alar", "YÃ¼ksek yÃ¼k taÅŸÄ±yan parÃ§alar"],
    notFor: ["Nem kontrolÃ¼ olmayan ortamlar", "Yeni baÅŸlayanlar", "AÃ§Ä±k hacimli yazÄ±cÄ±lar"],
    tips: "Nem kurutucuda saklanmalÄ±! BaskÄ± Ã¶ncesi 6+ saat kurutma gerekir. PVA yapÄ±ÅŸtÄ±rÄ±cÄ± kullanÄ±n.",
    priceRange: "â‚º900-2000/kg",
    description: "Nylon (Polyamide), endÃ¼striyel uygulamalarda kullanÄ±lan en dayanÄ±klÄ± 3D baskÄ± malzemelerinden biridir. MÃ¼kemmel mekanik Ã¶zelliklere sahiptir.",
    commonProblems: [
      { problem: "Warping", solution: "KapalÄ± hacim, yapÄ±ÅŸtÄ±rÄ±cÄ±, brim/raft kullanÄ±n" },
      { problem: "Nem kaynaklÄ± sorunlar", solution: "Kurutucuda saklanÄ±n, baskÄ± Ã¶ncesi kurutun" },
      { problem: "ZayÄ±f katman yapÄ±ÅŸmasÄ±", solution: "SÄ±caklÄ±ÄŸÄ± artÄ±rÄ±n, fan kapatÄ±n, enclosure kullanÄ±n" },
      { problem: "Ä°lk katman yapÄ±ÅŸmÄ±yor", solution: "PVA yapÄ±ÅŸtÄ±rÄ±cÄ± kullanÄ±n, Garolite yatak deneyin" }
    ],
    brands: [],
    materialFilter: "Nylon"
  }
};

const material = materials[slug as string];

if (!material) {
  return Astro.redirect('/3d-baski/malzemeler');
}

// Filament fiyatlarÄ±nÄ± API'den Ã§ek
let filamentPrices: any[] = [];
try {
  const res = await fetch(`${API_BASE}/api/filament-prices?type=${material.materialFilter}`);
  if (res.ok) {
    const data = await res.json();
    filamentPrices = (data.prices || []).slice(0, 6);
  }
} catch (e) {
  console.error("Filament fiyatlarÄ± yÃ¼klenemedi:", e);
}

// TÃ¼rk filamentlerini API'den Ã§ek
let turkishFilaments: any[] = [];
try {
  const res = await fetch(`${API_BASE}/api/filaments?material=${material.materialFilter}&limit=6`);
  if (res.ok) {
    const data = await res.json();
    turkishFilaments = data.filaments || [];
  }
} catch (e) {
  console.error("TÃ¼rk filamentleri yÃ¼klenemedi:", e);
}

const pageTitle = `${material.name} Filament Rehberi - BaskÄ± AyarlarÄ± ve Ä°puÃ§larÄ± | 3D-labX`;
const pageDescription = `${material.name} (${material.fullName}) filament iÃ§in detaylÄ± baskÄ± ayarlarÄ±, sÄ±caklÄ±k deÄŸerleri, sorun Ã§Ã¶zÃ¼mleri ve TÃ¼rk markasÄ± Ã¶nerileri.`;
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <Header />

  <main class="material-detail-page">
    <div class="container">
      <!-- Breadcrumb -->
      <nav class="breadcrumb">
        <a href="/3d-baski">3D BaskÄ±</a>
        <span>/</span>
        <a href="/3d-baski/malzemeler">Malzemeler</a>
        <span>/</span>
        <span class="current">{material.name}</span>
      </nav>

      <!-- Hero -->
      <header class="material-hero" style={`--mat-color: ${material.color}`}>
        <div class="hero-content">
          <div class="material-badge">
            <span class="badge-icon">{material.icon}</span>
            <span>Filament Rehberi</span>
          </div>
          <h1>{material.name}</h1>
          <p class="fullname">{material.fullName}</p>
          <p class="description">{material.description}</p>

          <div class="hero-stats">
            <div class="stat">
              <span class="label">Zorluk</span>
              <span class="value">{'â—'.repeat(material.difficulty)}{'â—‹'.repeat(5 - material.difficulty)}</span>
            </div>
            <div class="stat">
              <span class="label">DayanÄ±klÄ±lÄ±k</span>
              <span class="value">{'â—'.repeat(material.durability)}{'â—‹'.repeat(5 - material.durability)}</span>
            </div>
            <div class="stat">
              <span class="label">Esneklik</span>
              <span class="value">{'â—'.repeat(material.flexibility)}{'â—‹'.repeat(5 - material.flexibility)}</span>
            </div>
            <div class="stat">
              <span class="label">IsÄ± Direnci</span>
              <span class="value">{material.heatResistance}Â°C</span>
            </div>
          </div>
        </div>
      </header>

      <!-- Quick Settings -->
      <section class="settings-section">
        <h2>ğŸ¯ Ã–nerilen BaskÄ± AyarlarÄ±</h2>
        <div class="settings-grid">
          <div class="setting-card">
            <div class="setting-icon">ğŸŒ¡ï¸</div>
            <div class="setting-info">
              <span class="setting-label">Nozzle SÄ±caklÄ±ÄŸÄ±</span>
              <span class="setting-value">{material.nozzleTemp}</span>
            </div>
          </div>
          <div class="setting-card">
            <div class="setting-icon">ğŸ›ï¸</div>
            <div class="setting-info">
              <span class="setting-label">Yatak SÄ±caklÄ±ÄŸÄ±</span>
              <span class="setting-value">{material.bedTemp}</span>
            </div>
          </div>
          <div class="setting-card">
            <div class="setting-icon">âš¡</div>
            <div class="setting-info">
              <span class="setting-label">BaskÄ± HÄ±zÄ±</span>
              <span class="setting-value">{material.printSpeed}</span>
            </div>
          </div>
          <div class="setting-card">
            <div class="setting-icon">ğŸ’¨</div>
            <div class="setting-info">
              <span class="setting-label">Fan HÄ±zÄ±</span>
              <span class="setting-value">{material.fanSpeed}</span>
            </div>
          </div>
          <div class="setting-card">
            <div class="setting-icon">â†©ï¸</div>
            <div class="setting-info">
              <span class="setting-label">Retraction</span>
              <span class="setting-value">{material.retraction}</span>
            </div>
          </div>
          <div class="setting-card">
            <div class="setting-icon">ğŸ“</div>
            <div class="setting-info">
              <span class="setting-label">Katman YÃ¼ksekliÄŸi</span>
              <span class="setting-value">{material.layerHeight}</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Pros & Cons -->
      <section class="pros-cons-section">
        <div class="pros-cons-grid">
          <div class="pros-card">
            <h3>âœ… AvantajlarÄ±</h3>
            <ul>
              {material.pros.map((pro: string) => <li>{pro}</li>)}
            </ul>
          </div>
          <div class="cons-card">
            <h3>âŒ DezavantajlarÄ±</h3>
            <ul>
              {material.cons.map((con: string) => <li>{con}</li>)}
            </ul>
          </div>
        </div>
      </section>

      <!-- Ideal For / Not For -->
      <section class="usage-section">
        <div class="usage-grid">
          <div class="usage-card ideal">
            <h3>ğŸ¯ Ä°deal KullanÄ±m AlanlarÄ±</h3>
            <div class="usage-tags">
              {material.idealFor.map((item: string) => <span class="tag">{item}</span>)}
            </div>
          </div>
          <div class="usage-card notfor">
            <h3>â›” Uygun Olmayan KullanÄ±mlar</h3>
            <div class="usage-tags">
              {material.notFor.map((item: string) => <span class="tag">{item}</span>)}
            </div>
          </div>
        </div>
      </section>

      <!-- Common Problems -->
      <section class="problems-section">
        <h2>ğŸ”§ YaygÄ±n Sorunlar ve Ã‡Ã¶zÃ¼mleri</h2>
        <div class="problems-grid">
          {material.commonProblems.map((item: any) => (
            <div class="problem-card">
              <div class="problem-header">
                <span class="problem-icon">âš ï¸</span>
                <h4>{item.problem}</h4>
              </div>
              <p class="solution">
                <strong>Ã‡Ã¶zÃ¼m:</strong> {item.solution}
              </p>
            </div>
          ))}
        </div>
      </section>

      <!-- Tips -->
      <section class="tips-section">
        <div class="tip-card">
          <span class="tip-icon">ğŸ’¡</span>
          <div class="tip-content">
            <h3>Pro Ä°pucu</h3>
            <p>{material.tips}</p>
          </div>
        </div>
      </section>

      <!-- Turkish Filaments -->
      {turkishFilaments.length > 0 && (
        <section class="filaments-section">
          <div class="section-header">
            <h2>ğŸ‡¹ğŸ‡· TÃ¼rk MarkasÄ± {material.name} Filamentler</h2>
            <a href={`/filamentler?material=${material.materialFilter}`} class="see-all-btn">
              TÃ¼mÃ¼nÃ¼ GÃ¶r â†’
            </a>
          </div>
          <div class="filaments-grid">
            {turkishFilaments.map((f: any) => (
              <a href={`/filamentler/${f.id}`} class="filament-card">
                <div class="filament-header">
                  <span class="brand">{f.brand}</span>
                  <span class="verified">âœ“ DoÄŸrulanmÄ±ÅŸ</span>
                </div>
                <h4>{f.model}</h4>
                <div class="filament-meta">
                  <span>{f.color}</span>
                  <span>{f.weight_grams}g</span>
                </div>
                <div class="filament-price">â‚º{f.price_tl?.toFixed(0) || '-'}</div>
              </a>
            ))}
          </div>
        </section>
      )}

      <!-- Live Prices -->
      {filamentPrices.length > 0 && (
        <section class="prices-section">
          <div class="section-header">
            <h2>ğŸ’° GÃ¼ncel {material.name} FiyatlarÄ±</h2>
            <span class="update-badge">AnlÄ±k gÃ¼ncelleniyor</span>
          </div>
          <div class="prices-grid">
            {filamentPrices.map((p: any, i: number) => (
              <a href={p.store_url || '#'} target="_blank" rel="noopener" class={`price-card ${i === 0 ? 'best-deal' : ''}`}>
                {i === 0 && <span class="best-badge">ğŸ† En Uygun</span>}
                <div class="price-brand">{p.brand}</div>
                <div class="price-name">{p.product_name}</div>
                <div class="price-value">â‚º{p.price_tl?.toFixed(0)}</div>
                <div class="price-store">{p.store_name}</div>
              </a>
            ))}
          </div>
        </section>
      )}

      <!-- CTA -->
      <section class="cta-section">
        <a href={`/filamentler?material=${material.materialFilter}`} class="cta-btn primary">
          <span>ğŸ›’</span>
          {material.name} Filamentleri GÃ¶r
        </a>
        <a href="/3d-baski/malzemeler" class="cta-btn secondary">
          <span>â†</span>
          TÃ¼m Malzemeler
        </a>
      </section>
    </div>
  </main>
</BaseLayout>

<style>
  .material-detail-page {
    padding: 100px 20px 60px;
    min-height: 100vh;
    background: var(--bg-main);
  }

  .container {
    max-width: 1000px;
    margin: 0 auto;
  }

  /* Breadcrumb */
  .breadcrumb {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 24px;
    font-size: 0.9rem;
    color: var(--text-muted);
  }

  .breadcrumb a {
    color: var(--text-muted);
    text-decoration: none;
    transition: color 0.2s;
  }

  .breadcrumb a:hover {
    color: var(--primary);
  }

  .breadcrumb .current {
    color: var(--text-main);
    font-weight: 500;
  }

  /* Hero */
  .material-hero {
    background: linear-gradient(135deg, color-mix(in srgb, var(--mat-color) 15%, transparent), color-mix(in srgb, var(--mat-color) 5%, transparent));
    border: 1px solid color-mix(in srgb, var(--mat-color) 30%, transparent);
    border-radius: 20px;
    padding: 40px;
    margin-bottom: 32px;
  }

  .material-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 14px;
    background: var(--bg-card);
    border-radius: 20px;
    font-size: 0.85rem;
    margin-bottom: 16px;
  }

  .badge-icon {
    font-size: 1.1rem;
  }

  .material-hero h1 {
    font-size: 3rem;
    font-weight: 700;
    color: var(--mat-color);
    margin-bottom: 4px;
  }

  .fullname {
    font-size: 1.1rem;
    color: var(--text-muted);
    margin-bottom: 16px;
  }

  .description {
    font-size: 1rem;
    color: var(--text-main);
    line-height: 1.6;
    max-width: 700px;
    margin-bottom: 24px;
  }

  .hero-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 24px;
  }

  .hero-stats .stat {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .hero-stats .label {
    font-size: 0.8rem;
    color: var(--text-muted);
  }

  .hero-stats .value {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-main);
    letter-spacing: 1px;
  }

  /* Settings */
  .settings-section {
    margin-bottom: 32px;
  }

  .settings-section h2 {
    font-size: 1.4rem;
    margin-bottom: 20px;
    color: var(--text-main);
  }

  .settings-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
  }

  .setting-card {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 20px;
    background: var(--bg-card);
    border: 1px solid var(--border-soft);
    border-radius: 12px;
  }

  .setting-icon {
    font-size: 1.5rem;
  }

  .setting-label {
    display: block;
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: 2px;
  }

  .setting-value {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-main);
  }

  /* Pros & Cons */
  .pros-cons-section {
    margin-bottom: 32px;
  }

  .pros-cons-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
  }

  .pros-card, .cons-card {
    padding: 24px;
    border-radius: 12px;
  }

  .pros-card {
    background: rgba(34, 197, 94, 0.1);
    border: 1px solid rgba(34, 197, 94, 0.3);
  }

  .cons-card {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
  }

  .pros-card h3, .cons-card h3 {
    font-size: 1.1rem;
    margin-bottom: 16px;
  }

  .pros-card ul, .cons-card ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .pros-card li, .cons-card li {
    padding: 8px 0;
    border-bottom: 1px solid var(--border-soft);
    font-size: 0.95rem;
  }

  .pros-card li:last-child, .cons-card li:last-child {
    border-bottom: none;
  }

  /* Usage */
  .usage-section {
    margin-bottom: 32px;
  }

  .usage-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
  }

  .usage-card {
    padding: 24px;
    background: var(--bg-card);
    border: 1px solid var(--border-soft);
    border-radius: 12px;
  }

  .usage-card h3 {
    font-size: 1.1rem;
    margin-bottom: 16px;
  }

  .usage-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .usage-tags .tag {
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
  }

  .usage-card.ideal .tag {
    background: rgba(34, 197, 94, 0.15);
    color: #22C55E;
  }

  .usage-card.notfor .tag {
    background: rgba(239, 68, 68, 0.15);
    color: #EF4444;
  }

  /* Problems */
  .problems-section {
    margin-bottom: 32px;
  }

  .problems-section h2 {
    font-size: 1.4rem;
    margin-bottom: 20px;
  }

  .problems-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 16px;
  }

  .problem-card {
    padding: 20px;
    background: var(--bg-card);
    border: 1px solid var(--border-soft);
    border-radius: 12px;
  }

  .problem-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
  }

  .problem-header h4 {
    font-size: 1rem;
    color: #F97316;
  }

  .solution {
    font-size: 0.9rem;
    color: var(--text-main);
    line-height: 1.5;
  }

  /* Tips */
  .tips-section {
    margin-bottom: 32px;
  }

  .tip-card {
    display: flex;
    gap: 20px;
    padding: 24px;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05));
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: 12px;
  }

  .tip-icon {
    font-size: 2rem;
  }

  .tip-content h3 {
    font-size: 1.1rem;
    margin-bottom: 8px;
    color: #3B82F6;
  }

  .tip-content p {
    font-size: 0.95rem;
    line-height: 1.6;
  }

  /* Filaments Section */
  .filaments-section, .prices-section {
    margin-bottom: 32px;
  }

  .section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
  }

  .section-header h2 {
    font-size: 1.4rem;
  }

  .see-all-btn {
    color: var(--primary);
    text-decoration: none;
    font-weight: 500;
    font-size: 0.9rem;
  }

  .update-badge {
    font-size: 0.8rem;
    color: #22C55E;
    background: rgba(34, 197, 94, 0.1);
    padding: 4px 10px;
    border-radius: 12px;
  }

  .filaments-grid, .prices-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
  }

  .filament-card, .price-card {
    padding: 20px;
    background: var(--bg-card);
    border: 1px solid var(--border-soft);
    border-radius: 12px;
    text-decoration: none;
    transition: all 0.2s;
  }

  .filament-card:hover, .price-card:hover {
    border-color: var(--primary);
    transform: translateY(-2px);
  }

  .filament-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
  }

  .filament-header .brand {
    font-size: 0.8rem;
    color: var(--primary);
    font-weight: 600;
  }

  .filament-header .verified {
    font-size: 0.7rem;
    color: #22C55E;
  }

  .filament-card h4 {
    font-size: 1rem;
    color: var(--text-main);
    margin-bottom: 8px;
  }

  .filament-meta {
    display: flex;
    gap: 12px;
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: 12px;
  }

  .filament-price {
    font-size: 1.2rem;
    font-weight: 700;
    color: #22C55E;
  }

  .price-card {
    position: relative;
  }

  .price-card.best-deal {
    border-color: #22C55E;
    background: rgba(34, 197, 94, 0.05);
  }

  .best-badge {
    position: absolute;
    top: -10px;
    right: 12px;
    background: #22C55E;
    color: white;
    font-size: 0.75rem;
    padding: 4px 10px;
    border-radius: 12px;
  }

  .price-brand {
    font-size: 0.85rem;
    color: var(--primary);
    font-weight: 600;
    margin-bottom: 4px;
  }

  .price-name {
    font-size: 0.9rem;
    color: var(--text-main);
    margin-bottom: 12px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .price-value {
    font-size: 1.3rem;
    font-weight: 700;
    color: #22C55E;
    margin-bottom: 4px;
  }

  .price-store {
    font-size: 0.8rem;
    color: var(--text-muted);
  }

  /* CTA */
  .cta-section {
    display: flex;
    gap: 16px;
    justify-content: center;
    padding: 32px 0;
  }

  .cta-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 14px 28px;
    border-radius: 12px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.2s;
  }

  .cta-btn.primary {
    background: var(--primary);
    color: white;
  }

  .cta-btn.primary:hover {
    background: var(--primary-hover);
    transform: translateY(-2px);
  }

  .cta-btn.secondary {
    background: var(--bg-card);
    color: var(--text-main);
    border: 1px solid var(--border-soft);
  }

  .cta-btn.secondary:hover {
    border-color: var(--primary);
    color: var(--primary);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .material-hero {
      padding: 24px;
    }

    .material-hero h1 {
      font-size: 2rem;
    }

    .hero-stats {
      gap: 16px;
    }

    .tip-card {
      flex-direction: column;
      gap: 12px;
    }

    .cta-section {
      flex-direction: column;
    }

    .cta-btn {
      justify-content: center;
    }
  }
</style>
