---
export const prerender = true;
import BaseLayout from "../../layouts/BaseLayout.astro";
import Header from "../../components/Header.astro";

const title = "Creality Sorun Giderme Rehberi | 3D-labX";
const description = "Creality Ender 3, CR-10 ve diğer yazıcılarda en sık karşılaşılan sorunlar ve çözümleri. Yapışma, tıkanıklık, katman kayması, ipliklenme ve daha fazlası.";

const problems = [
  {
    id: 1,
    title: "Baskı Tablaya Yapışmıyor",
    color: "red",
    shortDesc: "İlk katman tablaya tutunamıyor ve model yerinden oynuyor.",
    steps: [
      { bold: "Tabla Ayarı (Leveling):", text: "Kağıt testini kullanarak nozzle ile tabla arasında hafif bir sürtünme olduğundan emin olun." },
      { bold: "Z-Offset:", text: "Otomatik seviyeleme (CR-Touch/BL-Touch) kullanıyorsanız Z-offset değerini eksi yönünde azaltarak nozzle'ı yaklaştırın." },
      { bold: "Temizlik:", text: "Tablayı İzopropil Alkol (IPA) veya sabunlu su ile temizleyerek yağdan arındırın." },
      { bold: "Sıcaklık:", text: "PLA için tablanın 50-60°C, ABS/PETG için 70-80°C olduğundan emin olun." }
    ],
    tip: "Tablaya 'Brim' (kenarlık) eklemek yapışma yüzeyini artırır."
  },
  {
    id: 2,
    title: "Nozzle Tıkanıklığı",
    color: "yellow",
    shortDesc: "Filament akışı duruyor veya kesik kesik geliyor.",
    steps: [
      { bold: "İğne ile Temizlik:", text: "Nozzle sıcakken (200°C+) ince temizleme iğnesi ile ucunu açın." },
      { bold: "Cold Pull (Soğuk Çekme):", text: "Nozzle'ı ısıtın, filamenti itin, sonra soğutup (90°C civarı) hızla çekerek içindeki pisliği alın." },
      { bold: "PTFE Boru Kontrolü:", text: "Borunun ucunun yanmış veya deforme olup olmadığını kontrol edin." },
      { bold: "Fan Kontrolü:", text: "Hotend fanının (soğutucu bloğa üfleyen fan) çalıştığından emin olun." }
    ],
    tip: "Filament değiştirdikten sonra bir miktar boşa akıtarak eski rengin/materyalin temizlendiğinden emin olun."
  },
  {
    id: 3,
    title: "Katman Kayması (Layer Shift)",
    color: "blue",
    shortDesc: "Baskı merdiven basamağı gibi yana doğru kayıyor.",
    steps: [
      { bold: "Kayış Gerginliği:", text: "X ve Y kayışlarının gitar teli gibi gergin olduğunu kontrol edin. Çok gevşekse sıkın." },
      { bold: "Kasnaklar:", text: "Motor milindeki dişli kasnakların (pulley) vidalarının sıkı olduğundan emin olun." },
      { bold: "Hız ve İvme:", text: "Yazdırma hızını (Print Speed) veya ivme (Acceleration) ayarlarını düşürün." },
      { bold: "Çarpma:", text: "Nozzle'ın baskı sırasında modele çarpıp çarpmadığını (Z-hop ayarı) kontrol edin." }
    ],
    tip: "Yazıcı kapalıyken eksenleri elinizle yavaşça hareket ettirin; takılma veya zorlanma olmamalıdır."
  },
  {
    id: 4,
    title: "İpliklenme (Stringing)",
    color: "green",
    shortDesc: "Modelin boşluk kısımlarında örümcek ağı gibi ipler oluşuyor.",
    steps: [
      { bold: "Geri Çekme (Retraction):", text: "Slicer'da 'Retraction Distance' ve 'Retraction Speed' ayarlarını artırın." },
      { bold: "Sıcaklık:", text: "Nozzle sıcaklığı çok yüksek olabilir. Sıcaklığı 5-10°C düşürmeyi deneyin." },
      { bold: "Filament Nemi:", text: "Nemli filament (özellikle PETG) ipliklenmeye neden olur. Filamenti kurutun." },
      { bold: "Travel Speed:", text: "Boşta hareket hızını artırmak sızmayı azaltabilir." }
    ],
    tip: "Bowden sistemler için Retraction 4-6mm, Direct Drive için 0.5-2mm arası önerilir."
  },
  {
    id: 5,
    title: "Eksik Ekstrüzyon (Under-Extrusion)",
    color: "orange",
    shortDesc: "Katmanlar arasında boşluklar var veya baskı sünger gibi zayıf.",
    steps: [
      { bold: "Extruder Dişlisi:", text: "Plastik itici dişlinin gevşek olup olmadığını veya dişlilerin aşınıp aşınmadığını kontrol edin." },
      { bold: "Extruder Kolu:", text: "Plastik extruder kollarında (özellikle eski Ender modellerinde) çatlak olup olmadığına bakın." },
      { bold: "Akış (Flow):", text: "Slicer'da 'Flow Rate' ayarını %100'den %105'e çıkarmayı deneyin." },
      { bold: "Nozzle:", text: "Kısmi tıkanıklık olabilir, nozzle'ı temizleyin." }
    ],
    tip: "Eğer extruder motoru 'tık-tık' sesi çıkarıyorsa, filamenti itemiyor demektir."
  },
  {
    id: 6,
    title: "Ekran/Kart Hataları (Homing Failed)",
    color: "purple",
    shortDesc: "Yazıcı başlangıç pozisyonuna (Home) gidemiyor veya hata veriyor.",
    steps: [
      { bold: "Switch Kontrolü:", text: "Limit switch'lere elinizle bastığınızda 'çıt' sesi geliyor mu ve kabloları takılı mı?" },
      { bold: "Kablo Bağlantıları:", text: "Anakart ve motor üzerindeki kabloların gevşek olup olmadığını kontrol edin." },
      { bold: "Engel:", text: "Hareket yolunda bir kablo veya baskı artığı olup olmadığına bakın." },
      { bold: "Yazılım:", text: "Yeni firmware yüklediyseniz doğru model için olduğundan emin olun." }
    ],
    tip: "Ekranda 'Homing Failed' yazıyorsa genellikle bir switch takılı kalmıştır veya kablosu çıkmıştır."
  }
];

const colorClasses: Record<string, { bg: string; dot: string }> = {
  red: { bg: "bg-red-500/10", dot: "bg-red-500" },
  yellow: { bg: "bg-yellow-500/10", dot: "bg-yellow-500" },
  blue: { bg: "bg-blue-500/10", dot: "bg-blue-500" },
  green: { bg: "bg-green-500/10", dot: "bg-green-500" },
  orange: { bg: "bg-orange-500/10", dot: "bg-orange-500" },
  purple: { bg: "bg-purple-500/10", dot: "bg-purple-500" }
};
---

<BaseLayout title={title} description={description}>
  <Header />

  <main class="troubleshoot-page">
    <div class="container">
      <!-- Hero Section -->
      <section class="hero-section">
        <div class="hero-badge creality">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"/>
          </svg>
          Creality Wiki Özeti
        </div>
        <h1 class="hero-title">Creality Yazıcı Sorun Giderme Rehberi</h1>
        <p class="hero-desc">
          Ender 3, CR-10 ve diğer Creality yazıcılarda karşılaşabileceğiniz yaygın sorunlar için kapsamlı çözüm rehberi. Topluluk deneyimleri ve Wiki kaynaklarından derlenmiştir.
        </p>
        <a href="https://www.creality.com/pages/download" target="_blank" rel="noopener" class="wiki-link">
          Creality Destek Sayfası
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
          </svg>
        </a>
      </section>

      <!-- Info Banner -->
      <div class="info-banner">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <div>
          <strong>Başlamadan Önce:</strong> Donanımsal müdahalelerden önce yazıcıyı fişten çektiğinizden emin olun.
        </div>
      </div>

      <!-- Problems Grid -->
      <section class="problems-grid">
        {problems.map((problem) => {
          const colors = colorClasses[problem.color];
          return (
            <article class="problem-card">
              <div class="card-header">
                <div class={`icon-wrapper ${colors.bg}`}>
                  <div class={`status-dot ${colors.dot}`}></div>
                </div>
                <h3 class="card-title">{problem.title}</h3>
              </div>
              <p class="card-desc">{problem.shortDesc}</p>
              <div class="solution-box">
                <h4 class="solution-title">Çözüm Adımları:</h4>
                <ul class="solution-list">
                  {problem.steps.map((step) => (
                    <li>
                      <strong>{step.bold}</strong> {step.text}
                    </li>
                  ))}
                </ul>
              </div>
              {problem.tip && (
                <div class="tip-box">
                  <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"/>
                  </svg>
                  <span>{problem.tip}</span>
                </div>
              )}
            </article>
          );
        })}
      </section>

      <!-- Back Link -->
      <div class="back-section">
        <a href="/sorun-cozumleri" class="back-link">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
          </svg>
          Tüm Sorun Çözümlerine Dön
        </a>
      </div>
    </div>
  </main>
</BaseLayout>

<style>
  .troubleshoot-page {
    padding-top: 140px;
    padding-bottom: 60px;
    min-height: 100vh;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }

  /* Hero Section */
  .hero-section {
    text-align: center;
    margin-bottom: 32px;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }

  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: var(--success);
    color: white;
    padding: 8px 16px;
    border-radius: 50px;
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 20px;
  }

  .hero-badge.creality {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  }

  .hero-title {
    font-size: clamp(1.75rem, 4vw, 2.5rem);
    font-weight: 800;
    margin-bottom: 16px;
    color: var(--text-main);
  }

  .hero-desc {
    font-size: 1.1rem;
    color: var(--text-muted);
    line-height: 1.7;
    margin-bottom: 20px;
  }

  .wiki-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    color: var(--accent);
    font-weight: 500;
    transition: all 0.2s;
  }

  .wiki-link:hover {
    color: var(--accent-hover);
    gap: 10px;
  }

  /* Info Banner */
  .info-banner {
    display: flex;
    align-items: center;
    gap: 12px;
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-left: 4px solid var(--accent);
    padding: 16px 20px;
    border-radius: 0 12px 12px 0;
    margin-bottom: 32px;
    color: var(--text-main);
    font-size: 0.95rem;
  }

  .info-banner svg {
    color: var(--accent);
    flex-shrink: 0;
  }

  /* Problems Grid */
  .problems-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
    gap: 24px;
    margin-bottom: 48px;
  }

  .problem-card {
    background: var(--bg-card);
    border: 1px solid var(--border-soft);
    border-radius: 16px;
    padding: 24px;
    transition: all 0.3s ease;
  }

  .problem-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
    border-color: var(--border-medium);
  }

  .card-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
  }

  .icon-wrapper {
    width: 40px;
    height: 40px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .status-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
  }

  .card-title {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-main);
  }

  .card-desc {
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-bottom: 16px;
    line-height: 1.5;
  }

  .solution-box {
    background: var(--bg-main);
    border: 1px solid var(--border-soft);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 12px;
  }

  .solution-title {
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--text-main);
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .solution-list {
    list-style: disc;
    padding-left: 18px;
    margin: 0;
  }

  .solution-list li {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: 6px;
    line-height: 1.5;
  }

  .solution-list li strong {
    color: var(--text-main);
    font-weight: 600;
  }

  /* Tip Box */
  .tip-box {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    padding: 12px;
    background: rgba(234, 179, 8, 0.1);
    border-radius: 8px;
    font-size: 0.8rem;
    color: var(--text-muted);
  }

  .tip-box svg {
    color: #eab308;
    flex-shrink: 0;
    margin-top: 2px;
  }

  /* Back Section */
  .back-section {
    text-align: center;
  }

  .back-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: var(--text-muted);
    font-weight: 500;
    padding: 12px 24px;
    border-radius: 12px;
    background: var(--bg-card);
    border: 1px solid var(--border-soft);
    transition: all 0.2s;
    text-decoration: none;
  }

  .back-link:hover {
    color: var(--accent);
    border-color: var(--accent);
    background: var(--accent-light);
  }

  /* Utility classes */
  .bg-red-500\/10 { background: rgba(239, 68, 68, 0.1); }
  .bg-yellow-500\/10 { background: rgba(234, 179, 8, 0.1); }
  .bg-blue-500\/10 { background: rgba(59, 130, 246, 0.1); }
  .bg-green-500\/10 { background: rgba(34, 197, 94, 0.1); }
  .bg-orange-500\/10 { background: rgba(249, 115, 22, 0.1); }
  .bg-purple-500\/10 { background: rgba(168, 85, 247, 0.1); }

  .bg-red-500 { background: #ef4444; }
  .bg-yellow-500 { background: #eab308; }
  .bg-blue-500 { background: #3b82f6; }
  .bg-green-500 { background: #22c55e; }
  .bg-orange-500 { background: #f97316; }
  .bg-purple-500 { background: #a855f7; }

  .w-4 { width: 1rem; }
  .h-4 { height: 1rem; }
  .w-5 { width: 1.25rem; }
  .h-5 { height: 1.25rem; }

  @media (max-width: 768px) {
    .problems-grid {
      grid-template-columns: 1fr;
    }

    .troubleshoot-page {
      padding-top: 120px;
    }
  }
</style>
