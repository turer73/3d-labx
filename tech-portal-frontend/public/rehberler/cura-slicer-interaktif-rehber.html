<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cura Slicer Interaktif Rehber - 3D-labX</title>
    <meta name="description" content="Cura Slicer ayarlarini interaktif simulasyonlarla ogren. Katman yuksekligi, infill, sicaklik ve hata cozumleri.">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* ================================
           CSS VARIABLES - Site ile Uyumlu
           ================================ */
        :root {
            --bg-main: #FBFBFD;
            --bg-card: #FFFFFF;
            --bg-soft: #F8FAFC;
            --bg-code: #F1F5F9;
            --text-main: #0F172A;
            --text-muted: #64748B;
            --text-light: #94A3B8;
            --accent: #2563EB;
            --accent-hover: #1D4ED8;
            --accent-light: #DBEAFE;
            --orange: #F97316;
            --orange-light: #FED7AA;
            --border-soft: #E2E8F0;
            --border-medium: #CBD5E1;
            --success: #10B981;
            --warning: #F59E0B;
            --error: #EF4444;
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-2xl: 24px;
            --transition-fast: 150ms ease;
            --transition-base: 200ms ease;
        }

        [data-theme="dark"] {
            --bg-main: #0F172A;
            --bg-card: #1E293B;
            --bg-soft: #1E293B;
            --bg-code: #334155;
            --text-main: #F1F5F9;
            --text-muted: #94A3B8;
            --text-light: #64748B;
            --accent: #60A5FA;
            --accent-hover: #93C5FD;
            --accent-light: #1E3A5F;
            --border-soft: #334155;
            --border-medium: #475569;
        }

        /* ================================
           RESET & BASE
           ================================ */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: var(--bg-main);
            color: var(--text-main);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }

        /* ================================
           LAYOUT
           ================================ */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .page-wrapper {
            padding: 40px 0 80px;
        }

        /* ================================
           HEADER
           ================================ */
        .page-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .version-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 14px;
            background: var(--accent-light);
            color: var(--accent);
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-radius: 100px;
            margin-bottom: 16px;
        }

        .version-badge::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--accent);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .page-title {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            margin-bottom: 12px;
            letter-spacing: -0.02em;
        }

        .page-title span {
            background: linear-gradient(135deg, var(--orange), #EAB308);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-desc {
            color: var(--text-muted);
            font-size: 1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* ================================
           BREADCRUMB
           ================================ */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-bottom: 24px;
        }

        .breadcrumb a {
            color: var(--text-muted);
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        .breadcrumb a:hover {
            color: var(--accent);
        }

        .breadcrumb span {
            color: var(--text-light);
        }

        /* ================================
           THEME TOGGLE
           ================================ */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            width: 44px;
            height: 44px;
            border: none;
            border-radius: 12px;
            background: var(--bg-card);
            border: 1px solid var(--border-soft);
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            transition: all var(--transition-base);
            box-shadow: var(--shadow-md);
        }

        .theme-toggle:hover {
            color: var(--orange);
            border-color: var(--orange);
            transform: scale(1.05);
        }

        /* ================================
           NAVIGATION TABS
           ================================ */
        .nav-tabs {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin-bottom: 32px;
        }

        .nav-tab {
            padding: 14px 24px;
            background: var(--bg-card);
            border: 1px solid var(--border-soft);
            border-radius: var(--radius-xl);
            color: var(--text-muted);
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-base);
            flex: 1;
            min-width: 140px;
            max-width: 220px;
            text-align: center;
        }

        .nav-tab:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .nav-tab.active {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        /* ================================
           MAIN CONTENT CARD
           ================================ */
        .main-card {
            background: var(--bg-card);
            border: 1px solid var(--border-soft);
            border-radius: var(--radius-2xl);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            min-height: 600px;
        }

        .tab-content {
            padding: 32px;
            animation: fadeIn 0.4s ease;
        }

        .tab-content.hidden {
            display: none;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ================================
           SECTION LAYOUTS
           ================================ */
        .section-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
        }

        @media (max-width: 900px) {
            .section-grid {
                grid-template-columns: 1fr;
            }
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title-icon {
            font-size: 1.5rem;
        }

        .section-desc {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 24px;
        }

        /* ================================
           CONTROL PANELS
           ================================ */
        .control-panel {
            background: var(--bg-soft);
            border: 1px solid var(--border-soft);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 20px;
        }

        .control-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .control-label-text {
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
        }

        .control-value {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--accent);
            background: var(--accent-light);
            padding: 4px 12px;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
        }

        /* ================================
           RANGE SLIDERS
           ================================ */
        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: var(--border-soft);
            border-radius: 3px;
            outline: none;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(37, 99, 235, 0.4);
            transition: transform var(--transition-fast);
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.15);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .range-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.7rem;
            color: var(--text-light);
            margin-top: 8px;
            font-family: 'JetBrains Mono', monospace;
        }

        /* ================================
           BUTTON GROUPS
           ================================ */
        .btn-group {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .btn-option {
            padding: 12px 8px;
            background: var(--bg-card);
            border: 1px solid var(--border-soft);
            border-radius: 10px;
            color: var(--text-muted);
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .btn-option:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .btn-option.active {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        /* ================================
           METRIC CARDS
           ================================ */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 20px;
        }

        .metric-card {
            background: var(--bg-soft);
            border: 1px solid var(--border-soft);
            border-radius: var(--radius-lg);
            padding: 16px;
        }

        .metric-label {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-light);
            margin-bottom: 4px;
        }

        .metric-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-main);
        }

        .metric-value.success { color: var(--success); }
        .metric-value.warning { color: var(--warning); }
        .metric-value.error { color: var(--error); }

        /* ================================
           FLOW BAR
           ================================ */
        .flow-bar-container {
            margin-top: 12px;
        }

        .flow-bar-bg {
            width: 100%;
            height: 8px;
            background: var(--border-soft);
            border-radius: 4px;
            overflow: hidden;
        }

        .flow-bar {
            height: 100%;
            background: var(--success);
            border-radius: 4px;
            transition: width 0.3s ease, background 0.3s ease;
        }

        .flow-bar.warning { background: var(--warning); }
        .flow-bar.danger { background: var(--error); }

        .flow-status {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 8px;
        }

        /* ================================
           VISUALIZER PANEL
           ================================ */
        .visualizer-panel {
            background: var(--bg-soft);
            border: 1px solid var(--border-soft);
            border-radius: var(--radius-lg);
            overflow: hidden;
            height: 100%;
            min-height: 400px;
            display: flex;
            flex-direction: column;
        }

        .visualizer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-soft);
            background: var(--bg-card);
        }

        .visualizer-title {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--text-main);
        }

        .visualizer-badge {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            padding: 4px 10px;
            border-radius: 6px;
            background: var(--accent-light);
            color: var(--accent);
        }

        .visualizer-body {
            flex: 1;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .visualizer-body canvas {
            max-width: 100%;
            max-height: 100%;
        }

        /* ================================
           Z-OFFSET CONTROL
           ================================ */
        .z-offset-control {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-card);
            border: 1px solid var(--border-soft);
            border-radius: var(--radius-lg);
            padding: 16px 24px;
            box-shadow: var(--shadow-md);
            min-width: 280px;
        }

        .z-offset-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.7rem;
            color: var(--text-light);
            margin-bottom: 8px;
        }

        .z-offset-value {
            text-align: center;
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--accent);
            margin-top: 8px;
        }

        /* ================================
           TIPS GRID
           ================================ */
        .tips-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--border-soft);
        }

        @media (max-width: 768px) {
            .tips-grid {
                grid-template-columns: 1fr;
            }
        }

        .tip-card {
            background: var(--bg-soft);
            border: 1px solid var(--border-soft);
            border-radius: var(--radius-lg);
            padding: 16px;
        }

        .tip-card h4 {
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 6px;
            color: var(--text-main);
        }

        .tip-card p {
            font-size: 0.8rem;
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* ================================
           CHART CONTAINER
           ================================ */
        .chart-container {
            position: relative;
            width: 100%;
            height: 250px;
        }

        /* ================================
           SELECT DROPDOWN
           ================================ */
        .select-wrapper {
            position: relative;
        }

        .select-dropdown {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-soft);
            border-radius: var(--radius-lg);
            color: var(--text-main);
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            outline: none;
            transition: border-color var(--transition-fast);
            -webkit-appearance: none;
            appearance: none;
        }

        .select-dropdown:focus {
            border-color: var(--accent);
        }

        .select-wrapper::after {
            content: '';
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid var(--text-muted);
            pointer-events: none;
        }

        /* ================================
           SOLUTION BOX
           ================================ */
        .solution-box {
            background: var(--bg-soft);
            border: 1px solid var(--border-soft);
            border-radius: var(--radius-lg);
            padding: 24px;
            margin-top: 20px;
        }

        .solution-box.hidden {
            display: none;
        }

        .solution-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-main);
        }

        .solution-desc {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 16px;
            line-height: 1.6;
        }

        .solution-settings {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 16px;
        }

        .solution-setting {
            display: flex;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-soft);
            border-radius: 10px;
        }

        .solution-setting-name {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-muted);
        }

        .solution-setting-value {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
        }

        .solution-tip {
            padding: 12px 16px;
            background: rgba(249, 115, 22, 0.1);
            border: 1px solid rgba(249, 115, 22, 0.2);
            border-radius: 10px;
            font-size: 0.85rem;
            color: var(--orange);
        }

        .solution-placeholder {
            text-align: center;
            padding: 48px;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        /* ================================
           FAN PHYSICS BOX
           ================================ */
        .fan-physics-box {
            background: rgba(37, 99, 235, 0.1);
            border: 1px solid rgba(37, 99, 235, 0.2);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-top: 20px;
        }

        .fan-physics-text {
            font-size: 0.85rem;
            color: var(--accent);
            font-style: italic;
            margin-top: 12px;
        }

        /* ================================
           FOOTER
           ================================ */
        .page-footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 24px;
            border-top: 1px solid var(--border-soft);
        }

        .page-footer p {
            color: var(--text-light);
            font-size: 0.85rem;
            margin-bottom: 12px;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--accent);
            font-weight: 600;
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        .back-link:hover {
            color: var(--accent-hover);
        }

        /* ================================
           RESPONSIVE
           ================================ */
        @media (max-width: 640px) {
            .page-wrapper {
                padding: 20px 0 60px;
            }

            .tab-content {
                padding: 20px;
            }

            .nav-tab {
                padding: 12px 16px;
                font-size: 0.8rem;
                min-width: 100px;
            }

            .btn-group {
                grid-template-columns: repeat(2, 1fr);
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .z-offset-control {
                min-width: 240px;
                padding: 12px 16px;
            }
        }
    </style>
</head>
<body>
    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Tema Degistir">
        <span id="themeIcon">&#9790;</span>
    </button>

    <div class="container">
        <div class="page-wrapper">
            <!-- Breadcrumb -->
            <nav class="breadcrumb">
                <a href="/">Ana Sayfa</a>
                <span>/</span>
                <a href="/rehberler">Rehberler</a>
                <span>/</span>
                <span>Cura Slicer</span>
            </nav>

            <!-- Header -->
            <header class="page-header">
                <div class="version-badge">Interaktif Rehber v3.0</div>
                <h1 class="page-title">Cura Slicer <span>Master Class</span></h1>
                <p class="page-desc">
                    Volumetrik akis limitlerinden termal dinamiklere; 3D baskinin bilimsel temellerini interaktif simulasyonlarla ogren.
                </p>
            </header>

            <!-- Navigation Tabs -->
            <nav class="nav-tabs">
                <button class="nav-tab active" onclick="switchTab('quality')" id="btn-quality">
                    1. Akis ve Kalite
                </button>
                <button class="nav-tab" onclick="switchTab('strength')" id="btn-strength">
                    2. Yapisal Mekanik
                </button>
                <button class="nav-tab" onclick="switchTab('material')" id="btn-material">
                    3. Malzeme ve Hata
                </button>
            </nav>

            <!-- Main Content -->
            <main class="main-card">

                <!-- TAB 1: QUALITY & FLOW -->
                <section id="tab-quality" class="tab-content">
                    <div class="section-grid">
                        <!-- Left Column: Controls -->
                        <div>
                            <h2 class="section-title">
                                <span class="section-title-icon">&#9881;</span>
                                Akiskanlar Dinamigi
                            </h2>
                            <p class="section-desc">
                                Hotend erime kapasitesi ve nozzle basinci dengesini anlayin. Volumetrik akis, baskinizin hiz limitini belirler.
                            </p>

                            <!-- Nozzle Selection -->
                            <div class="control-panel">
                                <div class="control-label">
                                    <span class="control-label-text">Nozzle Capi</span>
                                </div>
                                <div class="btn-group">
                                    <button class="btn-option" onclick="setNozzle(0.2)" data-nozzle="0.2">0.2mm</button>
                                    <button class="btn-option active" onclick="setNozzle(0.4)" data-nozzle="0.4">0.4mm</button>
                                    <button class="btn-option" onclick="setNozzle(0.6)" data-nozzle="0.6">0.6mm</button>
                                    <button class="btn-option" onclick="setNozzle(0.8)" data-nozzle="0.8">0.8mm</button>
                                </div>
                            </div>

                            <!-- Print Speed -->
                            <div class="control-panel">
                                <div class="control-label">
                                    <span class="control-label-text">Baski Hizi</span>
                                    <span class="control-value" id="speedDisplay">60 mm/s</span>
                                </div>
                                <input type="range" id="speedInput" min="20" max="150" step="5" value="60">
                                <div class="range-labels">
                                    <span>20 mm/s</span>
                                    <span>150 mm/s</span>
                                </div>
                            </div>

                            <!-- Layer Height -->
                            <div class="control-panel">
                                <div class="control-label">
                                    <span class="control-label-text">Katman Yuksekligi</span>
                                    <span class="control-value" id="layerDisplay">0.20 mm</span>
                                </div>
                                <input type="range" id="layerInput" min="0.08" max="0.32" step="0.04" value="0.20">
                                <div class="range-labels">
                                    <span id="minLayerLabel">0.08mm (Detay)</span>
                                    <span id="maxLayerLabel">0.32mm (Hiz)</span>
                                </div>
                            </div>

                            <!-- Calculated Metrics -->
                            <div class="control-panel">
                                <div class="control-label">
                                    <span class="control-label-text">Cizgi Genisligi</span>
                                    <span class="control-value" id="lineWidthDisplay">0.44 mm</span>
                                </div>
                            </div>

                            <div class="control-panel">
                                <div class="control-label">
                                    <span class="control-label-text">Volumetrik Akis</span>
                                    <span class="control-value" id="flowRateDisplay">5.28 mm3/s</span>
                                </div>
                                <div class="flow-bar-container">
                                    <div class="flow-bar-bg">
                                        <div class="flow-bar" id="flowBar" style="width: 35%"></div>
                                    </div>
                                    <p class="flow-status" id="flowStatus">Guvenli akis araligi. Standart hotend icin idealdir.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column: Visualizer -->
                        <div>
                            <div class="visualizer-panel">
                                <div class="visualizer-header">
                                    <span class="visualizer-title">Z-Offset Simulasyonu</span>
                                    <span class="visualizer-badge" id="resolutionBadge">Dengeli</span>
                                </div>
                                <div class="visualizer-body">
                                    <canvas id="layerCanvas"></canvas>

                                    <div class="z-offset-control">
                                        <div class="z-offset-labels">
                                            <span>Uzak (+)</span>
                                            <span>Yakin (-)</span>
                                        </div>
                                        <input type="range" id="zOffsetInput" min="-0.15" max="0.15" step="0.01" value="0">
                                        <div class="z-offset-value" id="zOffsetDisplay">Offset: 0.00mm</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tips -->
                    <div class="tips-grid">
                        <div class="tip-card">
                            <h4>Ilk Katman</h4>
                            <p>Yapisma icin ilk katmani %10-20 daha yavas yazdir ve katman yuksekligini artir (ornegin 0.24mm).</p>
                        </div>
                        <div class="tip-card">
                            <h4>Altin Kural</h4>
                            <p>Maksimum katman yuksekligi = Nozzle capi x 0.75. Ornegin 0.4mm nozzle icin max 0.3mm.</p>
                        </div>
                        <div class="tip-card">
                            <h4>Akis Limiti</h4>
                            <p>Standart hotend'ler 10-12 mm3/s akisi destekler. Yuksek hizda sicakligi 5-10C artirin.</p>
                        </div>
                    </div>
                </section>

                <!-- TAB 2: STRUCTURAL MECHANICS -->
                <section id="tab-strength" class="tab-content hidden">
                    <div class="section-grid">
                        <!-- Left Column: Controls -->
                        <div>
                            <h2 class="section-title">
                                <span class="section-title-icon">&#127959;</span>
                                Yapisal Mekanik
                            </h2>
                            <p class="section-desc">
                                Yuk dagilimi ve malzeme verimliligi. Duvar sayisi, ic doluluktan daha fazla mukavemet saglar.
                            </p>

                            <!-- Wall Count -->
                            <div class="control-panel">
                                <div class="control-label">
                                    <span class="control-label-text">Duvar Sayisi (Walls)</span>
                                    <span class="control-value" id="wallThicknessDisplay">1.2 mm</span>
                                </div>
                                <div class="btn-group">
                                    <button class="btn-option" onclick="setWalls(2)">2</button>
                                    <button class="btn-option active" onclick="setWalls(3)">3</button>
                                    <button class="btn-option" onclick="setWalls(4)">4</button>
                                    <button class="btn-option" onclick="setWalls(5)">5+</button>
                                </div>
                                <p style="font-size: 0.75rem; color: var(--text-light); margin-top: 8px; text-align: center;">
                                    * 3 duvar, %50 doluluktan daha fazla mukavemet saglar
                                </p>
                            </div>

                            <!-- Infill Density -->
                            <div class="control-panel">
                                <div class="control-label">
                                    <span class="control-label-text">Ic Doluluk (%)</span>
                                    <span class="control-value" id="infillDisplay">20%</span>
                                </div>
                                <input type="range" id="infillInput" min="0" max="100" step="5" value="20">
                                <div class="range-labels">
                                    <span>0% (Bos)</span>
                                    <span>100% (Dolu)</span>
                                </div>
                            </div>

                            <!-- Pattern Selection -->
                            <div class="control-panel">
                                <div class="control-label">
                                    <span class="control-label-text">Desen Geometrisi</span>
                                </div>
                                <div class="select-wrapper">
                                    <select class="select-dropdown" id="patternSelect" onchange="updatePattern()">
                                        <option value="grid">Izgara (Grid) - Dikey yuklerde guclu</option>
                                        <option value="triangles">Ucgenler (Triangles) - Dengeli mukavemet</option>
                                        <option value="gyroid">Gyroid - Izotropik, esnek</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Metrics -->
                            <div class="metrics-grid">
                                <div class="metric-card">
                                    <div class="metric-label">Tahmini Yuk Kapasitesi</div>
                                    <div class="metric-value" id="strengthDisplay">~25 kg</div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-label">Malzeme Maliyeti</div>
                                    <div class="metric-value" id="costDisplay">Dusuk</div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column: Visualizer -->
                        <div>
                            <div class="visualizer-panel">
                                <div class="visualizer-header">
                                    <span class="visualizer-title">Kesit Analizi</span>
                                    <span class="visualizer-badge" id="patternBadge">GRID</span>
                                </div>
                                <div class="visualizer-body">
                                    <canvas id="strengthCanvas"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tips -->
                    <div class="tips-grid">
                        <div class="tip-card">
                            <h4>Fonksiyonel Parcalar</h4>
                            <p>Mekanik parcalar icin 4+ duvar ve %30-50 infill kullanin. Desen olarak Gyroid veya Triangles secin.</p>
                        </div>
                        <div class="tip-card">
                            <h4>Dekoratif Parcalar</h4>
                            <p>Sadece goruntusu onemli parcalar icin 2 duvar ve %10-15 infill yeterlidir. Filament tasarrufu saglar.</p>
                        </div>
                        <div class="tip-card">
                            <h4>Gyroid Avantaji</h4>
                            <p>Gyroid deseni tum yonlerde esit mukavemet saglar ve sivi/hava gecirgendir. Vazolar icin idealdir.</p>
                        </div>
                    </div>
                </section>

                <!-- TAB 3: MATERIAL & TROUBLESHOOTING -->
                <section id="tab-material" class="tab-content hidden">
                    <div class="section-grid">
                        <!-- Left Column: Temperature -->
                        <div>
                            <h2 class="section-title">
                                <span class="section-title-icon">&#128293;</span>
                                Termal Yapisma Analizi
                            </h2>
                            <p class="section-desc">
                                Her filamentin ideal bir "tatli nokta" (sweet spot) sicakligi vardir. Cok soguk: zayif yapisma, cok sicak: stringing.
                            </p>

                            <div class="control-panel">
                                <div class="chart-container">
                                    <canvas id="tempChart"></canvas>
                                </div>
                            </div>

                            <div class="fan-physics-box">
                                <div class="control-label">
                                    <span class="control-label-text">Fan Hizi</span>
                                    <span class="control-value" id="fanDisplay">100%</span>
                                </div>
                                <input type="range" id="fanInput" min="0" max="100" step="5" value="100">
                                <p class="fan-physics-text" id="fanText">
                                    PLA icin %100: Kopruleme ve detaylar mukemmel. Katman yapismasi yeterli.
                                </p>
                            </div>
                        </div>

                        <!-- Right Column: Troubleshooting -->
                        <div>
                            <h2 class="section-title">
                                <span class="section-title-icon">&#128736;</span>
                                Hata Cozum Merkezi
                            </h2>
                            <p class="section-desc">
                                Yasadiginiz sorunu secin, cozum onerilerini gorun.
                            </p>

                            <div class="control-panel">
                                <div class="select-wrapper">
                                    <select class="select-dropdown" id="troubleSelect" onchange="solveTrouble()">
                                        <option value="" selected disabled>Bir sorun secin...</option>
                                        <option value="stringing">&#128375; Ipliklenme (Stringing)</option>
                                        <option value="blobs">&#129531; Topaklar (Blobs/Zits)</option>
                                        <option value="gaps">&#127761; Eksik Ekstruzyon (Under-extrusion)</option>
                                        <option value="warp">&#128208; Kose Kalkmasi (Warping)</option>
                                        <option value="elephant">&#128024; Fil Ayagi (Elephant Foot)</option>
                                        <option value="layer">&#9552; Katman Ayrilmasi (Layer Separation)</option>
                                    </select>
                                </div>
                            </div>

                            <div class="solution-box hidden" id="solutionBox">
                                <h3 class="solution-title" id="solTitle"></h3>
                                <p class="solution-desc" id="solDesc"></p>
                                <div class="solution-settings" id="solSettings"></div>
                                <div class="solution-tip" id="solTip"></div>
                            </div>

                            <div class="solution-placeholder" id="solutionPlaceholder">
                                Yukaridaki listeden bir sorun secin, detayli cozum onerileri burada gorunecek.
                            </div>
                        </div>
                    </div>

                    <!-- Tips -->
                    <div class="tips-grid">
                        <div class="tip-card">
                            <h4>PLA Ayarlari</h4>
                            <p>Nozzle: 190-215C, Tabla: 50-60C, Fan: %100. En kolay yazdirilabilen filament.</p>
                        </div>
                        <div class="tip-card">
                            <h4>PETG Ayarlari</h4>
                            <p>Nozzle: 230-250C, Tabla: 70-80C, Fan: %30-50. Stringing'e dikkat, retraction artirin.</p>
                        </div>
                        <div class="tip-card">
                            <h4>ABS/ASA Ayarlari</h4>
                            <p>Nozzle: 240-260C, Tabla: 90-110C, Fan: %0-20. Kapali ortam ve hava akimi gerektir.</p>
                        </div>
                    </div>
                </section>
            </main>

            <!-- Footer -->
            <footer class="page-footer">
                <p>Cura Slicer Interaktif Rehber | v3.0</p>
                <a href="/rehberler" class="back-link">
                    &#8592; Tum Rehberlere Don
                </a>
            </footer>
        </div>
    </div>

    <script>
        // ================================
        // GLOBAL STATE
        // ================================
        let isDark = false;
        let currentNozzle = 0.4;
        let currentSpeed = 60;
        let currentLayerHeight = 0.20;
        let currentWalls = 3;
        let currentInfill = 20;
        let currentPattern = 'grid';
        let zOffset = 0;
        let tempChart = null;

        // ================================
        // THEME MANAGEMENT
        // ================================
        function initTheme() {
            // Check localStorage or system preference
            const savedTheme = localStorage.getItem('theme');
            const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            isDark = savedTheme === 'dark' || (!savedTheme && systemDark);
            applyTheme();
        }

        function toggleTheme() {
            isDark = !isDark;
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            applyTheme();
        }

        function applyTheme() {
            document.documentElement.setAttribute('data-theme', isDark ? 'dark' : '');
            document.getElementById('themeIcon').innerHTML = isDark ? '&#9728;' : '&#9790;';

            // Update charts if they exist
            if (tempChart) {
                updateChartColors();
            }

            // Redraw canvases
            drawLayerSim();
            drawStrengthPattern();
        }

        // ================================
        // TAB NAVIGATION
        // ================================
        function switchTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });

            // Deactivate all buttons
            document.querySelectorAll('.nav-tab').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById('tab-' + tabId).classList.remove('hidden');
            document.getElementById('btn-' + tabId).classList.add('active');

            // Redraw canvases after tab switch
            setTimeout(() => {
                if (tabId === 'quality') drawLayerSim();
                if (tabId === 'strength') drawStrengthPattern();
                if (tabId === 'material' && tempChart) tempChart.resize();
            }, 50);
        }

        // ================================
        // QUALITY TAB FUNCTIONS
        // ================================
        function setNozzle(size) {
            currentNozzle = size;

            // Update button states
            document.querySelectorAll('[data-nozzle]').forEach(btn => {
                btn.classList.toggle('active', parseFloat(btn.dataset.nozzle) === size);
            });

            // Update layer height limits
            const minLayer = (size * 0.2).toFixed(2);
            const maxLayer = (size * 0.8).toFixed(2);

            const layerInput = document.getElementById('layerInput');
            layerInput.min = minLayer;
            layerInput.max = maxLayer;

            // Adjust current value if out of range
            if (currentLayerHeight > parseFloat(maxLayer)) {
                currentLayerHeight = parseFloat(maxLayer);
                layerInput.value = currentLayerHeight;
            }
            if (currentLayerHeight < parseFloat(minLayer)) {
                currentLayerHeight = parseFloat(minLayer);
                layerInput.value = currentLayerHeight;
            }

            document.getElementById('minLayerLabel').textContent = minLayer + 'mm (Detay)';
            document.getElementById('maxLayerLabel').textContent = maxLayer + 'mm (Hiz)';

            updateQualityMetrics();
            updateWallThickness();
        }

        function updateQualityMetrics() {
            // Line width = nozzle * 1.1
            const lineWidth = currentNozzle * 1.1;
            document.getElementById('lineWidthDisplay').textContent = lineWidth.toFixed(2) + ' mm';

            // Volumetric flow = speed * line_width * layer_height
            const flow = currentSpeed * lineWidth * currentLayerHeight;
            document.getElementById('flowRateDisplay').textContent = flow.toFixed(2) + ' mm3/s';

            // Flow bar (max safe is ~12 mm3/s for standard hotend)
            const maxFlow = 15;
            const percentage = Math.min((flow / maxFlow) * 100, 100);
            const flowBar = document.getElementById('flowBar');
            flowBar.style.width = percentage + '%';

            // Flow status
            const flowStatus = document.getElementById('flowStatus');
            if (flow > 12) {
                flowBar.className = 'flow-bar danger';
                flowStatus.innerHTML = '<strong style="color:var(--error)">Kritik!</strong> Standart hotend bu akisi eritebilir. Sicakligi artirin veya hizi azaltin.';
            } else if (flow > 9) {
                flowBar.className = 'flow-bar warning';
                flowStatus.innerHTML = '<strong style="color:var(--warning)">Yuksek akis.</strong> Sicakligi +5-10C artirmayi deneyin.';
            } else {
                flowBar.className = 'flow-bar';
                flowStatus.textContent = 'Guvenli akis araligi. Standart hotend icin idealdir.';
            }

            // Resolution badge
            const ratio = currentLayerHeight / currentNozzle;
            const badge = document.getElementById('resolutionBadge');
            if (ratio <= 0.35) {
                badge.textContent = 'Yuksek Cozunurluk';
                badge.style.background = 'rgba(16, 185, 129, 0.15)';
                badge.style.color = 'var(--success)';
            } else if (ratio <= 0.6) {
                badge.textContent = 'Dengeli';
                badge.style.background = 'var(--accent-light)';
                badge.style.color = 'var(--accent)';
            } else {
                badge.textContent = 'Hizli/Kaba';
                badge.style.background = 'rgba(249, 115, 22, 0.15)';
                badge.style.color = 'var(--orange)';
            }

            drawLayerSim();
        }

        function drawLayerSim() {
            const canvas = document.getElementById('layerCanvas');
            if (!canvas) return;

            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();

            if (rect.width === 0 || rect.height === 0) return;

            const dpr = window.devicePixelRatio || 1;
            canvas.width = rect.width * dpr;
            canvas.height = (rect.height - 80) * dpr; // Account for z-offset control
            canvas.style.width = rect.width + 'px';
            canvas.style.height = (rect.height - 80) + 'px';

            const ctx = canvas.getContext('2d');
            ctx.scale(dpr, dpr);
            ctx.clearRect(0, 0, rect.width, rect.height - 80);

            const w = rect.width;
            const h = rect.height - 80;

            // Draw build plate
            ctx.fillStyle = isDark ? '#334155' : '#CBD5E1';
            ctx.fillRect(0, h - 8, w, 8);

            // Layer simulation
            const scale = 50;
            const layerH = Math.max(3, currentLayerHeight * scale);
            const centerX = w / 2;
            const baseY = h - 12;
            const visualOffset = zOffset * scale * 4;
            const radius = Math.min(w, h) * 0.35;
            const layers = Math.floor(radius / layerH);

            // Layer colors
            const normalColor = isDark ? 'rgba(96, 165, 250, 0.5)' : 'rgba(37, 99, 235, 0.3)';
            const squishColor = isDark ? 'rgba(239, 68, 68, 0.5)' : 'rgba(239, 68, 68, 0.3)';
            const gapColor = isDark ? 'rgba(234, 179, 8, 0.5)' : 'rgba(234, 179, 8, 0.3)';
            const strokeColor = isDark ? '#60A5FA' : '#2563EB';

            ctx.strokeStyle = strokeColor;
            ctx.lineWidth = 1;

            for (let i = 0; i < layers; i++) {
                let y = baseY - (i * layerH) - visualOffset;
                let currentLayerH = layerH;
                let widthMod = 0;

                // First layer special handling
                if (i === 0) {
                    if (zOffset < 0) {
                        // Too close - squished
                        currentLayerH = Math.max(2, layerH + visualOffset);
                        y = baseY - currentLayerH;
                        widthMod = Math.abs(visualOffset) * 2;
                        ctx.fillStyle = squishColor;
                    } else if (zOffset > 0) {
                        // Too far - poor adhesion
                        ctx.fillStyle = gapColor;
                    } else {
                        ctx.fillStyle = normalColor;
                    }
                } else {
                    ctx.fillStyle = normalColor;
                }

                const hFromBase = i * layerH;
                if (hFromBase >= radius) break;

                const layerWidth = (Math.sqrt(radius * radius - hFromBase * hFromBase) * 2) + widthMod;
                const x = centerX - layerWidth / 2;

                ctx.beginPath();
                ctx.rect(x, y - currentLayerH, layerWidth, currentLayerH);
                ctx.fill();
                ctx.stroke();
            }
        }

        // ================================
        // STRENGTH TAB FUNCTIONS
        // ================================
        function setWalls(count) {
            currentWalls = count;

            // Update button states
            document.querySelectorAll('.btn-option').forEach(btn => {
                if (btn.textContent.trim() === count.toString() ||
                    (count === 5 && btn.textContent.includes('5+'))) {
                    btn.classList.add('active');
                } else if (btn.closest('#tab-strength')) {
                    btn.classList.remove('active');
                }
            });

            updateWallThickness();
            updateStrengthMetrics();
        }

        function updateWallThickness() {
            const thickness = (currentWalls * currentNozzle).toFixed(1);
            const display = document.getElementById('wallThicknessDisplay');
            if (display) display.textContent = thickness + ' mm';
        }

        function updatePattern() {
            currentPattern = document.getElementById('patternSelect').value;
            document.getElementById('patternBadge').textContent = currentPattern.toUpperCase();
            updateStrengthMetrics();
        }

        function updateStrengthMetrics() {
            // Calculate strength estimate
            const nozzleFactor = currentNozzle / 0.4;
            let strength = (currentWalls * 20 * nozzleFactor) + (currentInfill * 0.3);

            if (currentPattern === 'gyroid') strength *= 1.15;
            if (currentPattern === 'triangles') strength *= 1.1;

            const loadKg = Math.round((strength * 0.5) + 10);
            document.getElementById('strengthDisplay').textContent = '~' + loadKg + ' kg';

            // Calculate cost
            const cost = (currentWalls * 5 * nozzleFactor) + (currentInfill * 0.7);
            const costDisplay = document.getElementById('costDisplay');

            if (cost < 35) {
                costDisplay.textContent = 'Dusuk';
                costDisplay.className = 'metric-value success';
            } else if (cost < 70) {
                costDisplay.textContent = 'Orta';
                costDisplay.className = 'metric-value warning';
            } else {
                costDisplay.textContent = 'Yuksek';
                costDisplay.className = 'metric-value error';
            }

            drawStrengthPattern();
        }

        function drawStrengthPattern() {
            const canvas = document.getElementById('strengthCanvas');
            if (!canvas) return;

            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();

            if (rect.width === 0 || rect.height === 0) return;

            const dpr = window.devicePixelRatio || 1;
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';

            const ctx = canvas.getContext('2d');
            ctx.scale(dpr, dpr);
            ctx.clearRect(0, 0, rect.width, rect.height);

            const w = rect.width;
            const h = rect.height;
            const padding = 30;

            // Wall thickness visual
            const wallThick = Math.max(4, currentWalls * currentNozzle * 5);

            // Draw outer walls
            ctx.lineWidth = wallThick;
            ctx.strokeStyle = isDark ? '#EF4444' : '#DC2626';
            ctx.strokeRect(padding, padding, w - padding * 2, h - padding * 2);

            // Clip for infill
            ctx.save();
            ctx.beginPath();
            const inset = padding + wallThick / 2;
            ctx.rect(inset, inset, w - inset * 2, h - inset * 2);
            ctx.clip();

            // Draw infill pattern
            ctx.lineWidth = Math.max(1, currentNozzle * 2);
            ctx.strokeStyle = isDark ? '#22C55E' : '#16A34A';

            let spacing = 100 - (currentInfill * 0.9);
            if (spacing < 8) spacing = 8;
            if (currentInfill === 0) spacing = 10000;

            if (currentPattern === 'grid') {
                // Vertical lines
                for (let x = 0; x <= w; x += spacing) {
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, h);
                    ctx.stroke();
                }
                // Horizontal lines
                for (let y = 0; y <= h; y += spacing) {
                    ctx.beginPath();
                    ctx.moveTo(0, y);
                    ctx.lineTo(w, y);
                    ctx.stroke();
                }
            } else if (currentPattern === 'triangles') {
                // Diagonal lines (left to right)
                for (let x = -h; x <= w; x += spacing) {
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x + h, h);
                    ctx.stroke();
                }
                // Diagonal lines (right to left)
                for (let x = 0; x <= w + h; x += spacing) {
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x - h, h);
                    ctx.stroke();
                }
                // Horizontal lines
                for (let y = 0; y <= h; y += spacing * 0.86) {
                    ctx.beginPath();
                    ctx.moveTo(0, y);
                    ctx.lineTo(w, y);
                    ctx.stroke();
                }
            } else if (currentPattern === 'gyroid') {
                // Simplified gyroid pattern
                ctx.beginPath();
                for (let y = 0; y < h; y += 4) {
                    for (let x = 0; x < w; x += 4) {
                        const val = Math.sin(x / spacing * Math.PI) + Math.cos(y / spacing * Math.PI);
                        if (Math.abs(val) < 0.2) {
                            ctx.rect(x, y, 3, 3);
                        }
                    }
                }
                ctx.fill();
            }

            ctx.restore();
        }

        // ================================
        // MATERIAL TAB FUNCTIONS
        // ================================
        function initTempChart() {
            const ctx = document.getElementById('tempChart');
            if (!ctx) return;

            const gradient = ctx.getContext('2d').createLinearGradient(0, 0, 0, 250);
            gradient.addColorStop(0, 'rgba(249, 115, 22, 0.4)');
            gradient.addColorStop(1, 'rgba(249, 115, 22, 0)');

            tempChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['185', '195', '200', '205', '210', '215', '220'],
                    datasets: [{
                        label: 'Katman Yapismasi',
                        data: [30, 70, 90, 95, 85, 65, 40],
                        borderColor: '#F97316',
                        backgroundColor: gradient,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#F97316',
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const val = context.raw;
                                    if (val >= 90) return 'Mukemmel yapisma';
                                    if (val >= 70) return 'Iyi yapisma';
                                    if (val >= 50) return 'Orta yapisma';
                                    return 'Zayif yapisma';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            display: false,
                            min: 0,
                            max: 100
                        },
                        x: {
                            grid: {
                                color: isDark ? '#334155' : '#E2E8F0'
                            },
                            ticks: {
                                color: isDark ? '#94A3B8' : '#64748B',
                                callback: function(value, index) {
                                    return this.getLabelForValue(value) + 'C';
                                }
                            },
                            title: {
                                display: true,
                                text: 'PLA Nozzle Sicakligi',
                                color: isDark ? '#94A3B8' : '#64748B'
                            }
                        }
                    }
                }
            });
        }

        function updateChartColors() {
            if (!tempChart) return;

            tempChart.options.scales.x.grid.color = isDark ? '#334155' : '#E2E8F0';
            tempChart.options.scales.x.ticks.color = isDark ? '#94A3B8' : '#64748B';
            tempChart.options.scales.x.title.color = isDark ? '#94A3B8' : '#64748B';
            tempChart.update();
        }

        function updateFanPhysics() {
            const value = document.getElementById('fanInput').value;
            document.getElementById('fanDisplay').textContent = value + '%';

            const text = document.getElementById('fanText');
            if (value == 0) {
                text.textContent = 'ABS/ASA icin ideal. Katmanlar mukemmel yapisir, ancak kopruleme (bridging) zorlasir.';
            } else if (value < 30) {
                text.textContent = 'PETG icin onerilir. Katman yapismasi korunur, stringing azalir.';
            } else if (value < 70) {
                text.textContent = 'Orta sogutma. Cogu filament icin dengeli bir secim.';
            } else {
                text.textContent = 'PLA icin ideal. Mukemmel detay, kopruleme ve overhang performansi.';
            }
        }

        // ================================
        // TROUBLESHOOTING
        // ================================
        const troubleData = {
            stringing: {
                title: 'Ipliklenme (Stringing)',
                desc: 'Nozzle hareket ederken erimi filament szyor ve ince iplikler brakyor. Genellikle retraction ayarlar veya scaklk sorunlarndan kaynaklanr.',
                settings: [
                    { name: 'Retraction Distance', value: '+1-2mm artirin' },
                    { name: 'Retraction Speed', value: '40-50 mm/s' },
                    { name: 'Nozzle Sicakligi', value: '-5 ile -10C azaltin' },
                    { name: 'Travel Speed', value: '150+ mm/s' }
                ],
                tip: 'Pro tip: Filament nemli olabilir. Kurutma islemine tabi tutun veya yeni filament deneyin.'
            },
            blobs: {
                title: 'Topaklar / Zits (Blobs)',
                desc: 'Yuzey uzerinde kucuk kabarciklar veya topaklar. Genellikle katman degisim noktalarinda veya fazla ekstruzyondan kaynaklanir.',
                settings: [
                    { name: 'Coasting', value: 'Aktif edin (0.2-0.5mm)' },
                    { name: 'Wipe', value: 'Aktif edin' },
                    { name: 'Z-Seam', value: 'Sharpest Corner veya Hide' },
                    { name: 'Outer Wall Wipe', value: '0.2mm' }
                ],
                tip: 'Pro tip: Power Loss Recovery aktifse kapatmayi deneyin, fazla duraksama yapar.'
            },
            gaps: {
                title: 'Eksik Ekstruzyon (Under-extrusion)',
                desc: 'Katmanlar arasinda bosluklar, zayif dolgu veya ince duvarlar. Yetersiz filament akisindan kaynaklanir.',
                settings: [
                    { name: 'Flow Rate', value: '%105-110 artirin' },
                    { name: 'Nozzle Sicakligi', value: '+5-10C artirin' },
                    { name: 'Print Speed', value: 'Azaltin' },
                    { name: 'Nozzle', value: 'Temizleyin veya degistirin' }
                ],
                tip: 'Pro tip: Extruder dislilarini kontrol edin, asnm olabilir. E-steps kalibrasyonu yapn.'
            },
            warp: {
                title: 'Kose Kalkmasi (Warping)',
                desc: 'Baski tabladan kalkiyor, ozellikle koselerde. Esit olmayan soguma ve buzulmeden kaynaklanir.',
                settings: [
                    { name: 'Bed Sicakligi', value: '+5-10C artirin' },
                    { name: 'Brim', value: 'Aktif edin (5-10mm)' },
                    { name: 'Enclosure', value: 'Kapali ortam kullanin' },
                    { name: 'Draft Shield', value: 'Aktif edin (ABS icin)' }
                ],
                tip: 'Pro tip: Tabla temizligi kritik. IPA ile silin ve yapisma spreyi/tutkal kullanin.'
            },
            elephant: {
                title: 'Fil Ayagi (Elephant Foot)',
                desc: 'Ilk katmanlar disariya dogru yayilmis, taban normalden genis. Fazla ezilme veya yuksek tabla sicakligidan kaynaklanir.',
                settings: [
                    { name: 'Initial Layer Exp.', value: '-0.1 ile -0.2mm' },
                    { name: 'Bed Sicakligi', value: '-5C azaltin' },
                    { name: 'Z-Offset', value: 'Hafifce artirin' },
                    { name: 'Initial Layer Speed', value: 'Azaltin' }
                ],
                tip: 'Pro tip: Z-offset cok yakin ayarlanmis olabilir. Kagit testi yapin ve hafifce yukseltin.'
            },
            layer: {
                title: 'Katman Ayrilmasi (Layer Separation)',
                desc: 'Katmanlar birbirine yapismiyor, parcalar zayif ve kolay kiriliyor. Yetersiz katman yapismasi.',
                settings: [
                    { name: 'Nozzle Sicakligi', value: '+10-15C artirin' },
                    { name: 'Print Speed', value: 'Azaltin' },
                    { name: 'Fan Hizi', value: 'Azaltin (%50-70)' },
                    { name: 'Layer Height', value: 'Azaltin' }
                ],
                tip: 'Pro tip: Soguk ortamda basiyorsaniz enclosure kullanin. Hava akimini engelleyin.'
            }
        };

        function solveTrouble() {
            const value = document.getElementById('troubleSelect').value;
            const box = document.getElementById('solutionBox');
            const placeholder = document.getElementById('solutionPlaceholder');

            if (!value || !troubleData[value]) {
                box.classList.add('hidden');
                placeholder.style.display = 'block';
                return;
            }

            const data = troubleData[value];

            document.getElementById('solTitle').textContent = data.title;
            document.getElementById('solDesc').textContent = data.desc;
            document.getElementById('solTip').textContent = data.tip;

            const settingsHtml = data.settings.map(s =>
                `<div class="solution-setting">
                    <span class="solution-setting-name">${s.name}</span>
                    <span class="solution-setting-value">${s.value}</span>
                </div>`
            ).join('');
            document.getElementById('solSettings').innerHTML = settingsHtml;

            box.classList.remove('hidden');
            placeholder.style.display = 'none';
        }

        // ================================
        // EVENT LISTENERS
        // ================================
        function initEventListeners() {
            // Speed slider
            document.getElementById('speedInput').addEventListener('input', function() {
                currentSpeed = parseInt(this.value);
                document.getElementById('speedDisplay').textContent = currentSpeed + ' mm/s';
                updateQualityMetrics();
            });

            // Layer height slider
            document.getElementById('layerInput').addEventListener('input', function() {
                currentLayerHeight = parseFloat(this.value);
                document.getElementById('layerDisplay').textContent = currentLayerHeight.toFixed(2) + ' mm';
                updateQualityMetrics();
            });

            // Z-offset slider
            document.getElementById('zOffsetInput').addEventListener('input', function() {
                zOffset = parseFloat(this.value);
                const sign = zOffset > 0 ? '+' : '';
                document.getElementById('zOffsetDisplay').textContent = 'Offset: ' + sign + zOffset.toFixed(2) + 'mm';
                drawLayerSim();
            });

            // Infill slider
            document.getElementById('infillInput').addEventListener('input', function() {
                currentInfill = parseInt(this.value);
                document.getElementById('infillDisplay').textContent = currentInfill + '%';
                updateStrengthMetrics();
            });

            // Fan slider
            document.getElementById('fanInput').addEventListener('input', updateFanPhysics);

            // Window resize
            window.addEventListener('resize', function() {
                drawLayerSim();
                drawStrengthPattern();
            });
        }

        // ================================
        // INITIALIZATION
        // ================================
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            initEventListeners();
            initTempChart();

            // Initial calculations
            setNozzle(0.4);
            setWalls(3);
            updateQualityMetrics();
            updateStrengthMetrics();
            updateFanPhysics();

            // Initial draw after a short delay
            setTimeout(() => {
                drawLayerSim();
                drawStrengthPattern();
            }, 100);
        });
    </script>
</body>
</html>
