<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#F59E0B">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TÄ±kla Fethet">
    <meta name="description" content="TÄ±kla, krallÄ±ÄŸÄ±nÄ± inÅŸa et, kahramanlarÄ±nÄ± topla, bosslarÄ± yen! TÃ¼rkÃ§e idle strateji oyunu.">
    <title>TÄ±kla Fethet</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/icon-192.svg">
    <link rel="stylesheet" href="style.css?v=11">
</head>
<body>
    <!-- ===== TOP BAR - Resources ===== -->
    <header id="top-bar">
        <div class="resource" id="res-gold">
            <span class="res-icon" id="res-gold-icon"></span>
            <div class="res-info">
                <span class="res-amount" id="gold-amount">0</span>
                <span class="res-rate" id="gold-rate">+0/s</span>
            </div>
        </div>
        <div class="resource" id="res-gems">
            <span class="res-icon" id="res-gem-icon"></span>
            <div class="res-info">
                <span class="res-amount" id="gems-amount">0</span>
            </div>
        </div>
        <div class="resource" id="res-prestige">
            <span class="res-icon" id="res-star-icon"></span>
            <div class="res-info">
                <span class="res-amount" id="prestige-amount">0</span>
                <span class="res-rate" id="prestige-mult">x1.00</span>
            </div>
        </div>
        <span id="streak-indicator">ğŸ”¥ 0 gÃ¼n</span>
        <button id="btn-lang" class="lang-btn" title="Dil / Language">ğŸŒ</button>
        <button id="btn-cloud-save" class="cloud-btn" title="Bulut KayÄ±t">â˜ï¸</button>
        <button id="btn-sound" class="sound-btn" title="Ses AÃ§/Kapat">ğŸ”Š</button>
    </header>

    <!-- ===== MAIN AREA ===== -->
    <main id="game-area">
        <!-- Kingdom Visual -->
        <section id="kingdom-view">
            <div id="kingdom-title">
                <h1 id="kingdom-name">TÄ±kla Fethet</h1>
                <span id="kingdom-level">Seviye 1</span>
            </div>
            <!-- Kingdom Scene - visual buildings -->
            <div id="kingdom-scene">
                <div id="kingdom-ground"></div>
                <div id="kingdom-buildings-visual"></div>
            </div>
            <div id="tap-area">
                <div id="tap-circle">
                    <span id="tap-icon"></span>
                    <span id="tap-text">Dokun!</span>
                </div>
                <div id="tap-particles"></div>
            </div>
            <div id="dps-display">
                <span id="dps-label">GÃ¼Ã§:</span>
                <span id="dps-value">0</span>
                <span id="dps-suffix">/s</span>
            </div>
        </section>

        <!-- Lucky Event Banner -->
        <div id="lucky-event" class="hidden">
            <span id="lucky-icon">ğŸ€</span>
            <span id="lucky-text">AltÄ±n YaÄŸmuru! x5 Ã¼retim 10 saniye!</span>
            <div id="lucky-timer-bar"><div id="lucky-timer-fill"></div></div>
        </div>

        <!-- Flash Sale Banner (Scarcity/FOMO) -->
        <div id="flash-sale" class="hidden">
            <span class="sale-icon">ğŸ·ï¸</span>
            <div class="sale-info">
                <div class="sale-title">âš¡ FLASH SATIÅ!</div>
                <div class="sale-desc" id="sale-desc">TÃ¼m Ã¼retim x2 â€” 30 saniye!</div>
                <div>
                    <span class="sale-original" id="sale-original">100 ğŸ’</span>
                    <span class="sale-price" id="sale-price">30 ğŸ’</span>
                </div>
            </div>
            <div>
                <span class="sale-timer" id="sale-timer">30s</span>
            </div>
            <div class="sale-timer-bar"><div class="sale-timer-fill" id="sale-timer-fill"></div></div>
        </div>

        <!-- Traveling Merchant Banner -->
        <div id="merchant-banner" class="hidden">
            <div class="merchant-header">
                <span class="merchant-icon">ğŸ§³</span>
                <div class="merchant-title-area">
                    <div class="merchant-title" id="merchant-title">ğŸ§³ Gezgin TÃ¼ccar geldi!</div>
                    <div class="merchant-timer" id="merchant-timer">5:00 kaldÄ±</div>
                </div>
            </div>
            <div class="merchant-items" id="merchant-items">
                <!-- Dynamically filled with 3 items -->
            </div>
            <div class="merchant-timer-bar"><div class="merchant-timer-fill" id="merchant-timer-fill"></div></div>
        </div>

        <!-- Next Milestone -->
        <section id="milestone-bar">
            <div id="milestone-info">
                <span id="milestone-label">Sonraki:</span>
                <span id="milestone-target">ğŸŒ¾ Ã‡iftlik AÃ§</span>
            </div>
            <div id="milestone-progress">
                <div id="milestone-fill"></div>
            </div>
        </section>

        <!-- Mini Stats -->
        <section id="mini-stats">
            <div class="mini-stat">
                <span class="stat-value" id="stat-gps">0</span>
                <span class="stat-label">AltÄ±n/s</span>
            </div>
            <div class="mini-stat">
                <span class="stat-value" id="stat-tap">1</span>
                <span class="stat-label">DokunuÅŸ</span>
            </div>
            <div class="mini-stat">
                <span class="stat-value" id="stat-clicks">0</span>
                <span class="stat-label">TÄ±klama</span>
            </div>
            <div class="mini-stat">
                <span class="stat-value" id="stat-boss">1</span>
                <span class="stat-label">Boss</span>
            </div>
        </section>

        <!-- Boss Battle Bar -->
        <section id="boss-section" class="hidden">
            <div id="boss-info">
                <span id="boss-name">Goblin Åef</span>
                <span id="boss-timer">30s</span>
            </div>
            <div id="boss-hp-bar">
                <div id="boss-hp-fill"></div>
                <span id="boss-hp-text">1000 / 1000</span>
            </div>
        </section>

        <!-- Boss Preview (when not in battle) -->
        <section id="boss-preview">
            <div id="boss-preview-icon"></div>
            <div id="boss-preview-info">
                <span id="boss-preview-name">SÄ±radaki: Goblin Åef</span>
                <span id="boss-preview-hp">HP: 500</span>
            </div>
            <button id="btn-fight-boss" class="btn-boss"><span class="nav-icon-svg" id="fight-icon"></span> SavaÅŸ!</button>
        </section>

        <!-- Achievements Banner -->
        <section id="achievements-banner" class="hidden">
            <div id="achievement-popup">
                <span id="achievement-icon">ğŸ†</span>
                <div id="achievement-info">
                    <span id="achievement-title">BaÅŸarÄ±m!</span>
                    <span id="achievement-desc">Ä°lk dokunuÅŸ!</span>
                </div>
                <span id="achievement-reward">+10 ğŸ’</span>
            </div>
        </section>

        <!-- Heroes Panel -->
        <section id="heroes-panel" style="display:none;">
            <div class="panel-header">
                <h2><span id="ph-heroes-icon"></span> Kahramanlar</h2>
                <span id="heroes-count">0 / 6</span>
            </div>
            <div id="heroes-list">
                <!-- Dynamically filled -->
            </div>
        </section>

        <!-- Buildings Panel -->
        <section id="buildings-panel">
            <div class="panel-header">
                <h2><span id="ph-buildings-icon"></span> Binalar</h2>
                <span id="buildings-count">0 / 8</span>
            </div>
            <div id="buildings-list">
                <!-- Dynamically filled -->
            </div>
        </section>

        <!-- Upgrades Panel -->
        <section id="upgrades-panel" style="display:none;">
            <div class="panel-header">
                <h2><span id="ph-upgrades-icon"></span> GeliÅŸtirmeler</h2>
            </div>
            <div id="upgrades-list">
                <!-- Dynamically filled -->
            </div>
        </section>

        <!-- Achievements Panel -->
        <section id="achievements-panel" style="display:none;">
            <div class="panel-header">
                <h2><span id="ph-achievements-icon"></span> BaÅŸarÄ±mlar</h2>
                <span id="achievements-progress">0 / 20</span>
            </div>
            <div id="achievements-list">
                <!-- Dynamically filled -->
            </div>
        </section>

        <!-- Quests Panel -->
        <section id="quests-panel" style="display:none;">
            <div class="panel-header">
                <h2><span id="ph-quests-icon"></span> GÃ¶revler</h2>
                <span id="quests-progress">0 / 8</span>
            </div>
            <div class="quest-section">
                <h3 class="quest-section-title">ğŸ“‹ GÃ¼nlÃ¼k GÃ¶revler</h3>
                <div id="daily-quests-list"></div>
            </div>
            <div class="quest-section">
                <h3 class="quest-section-title">ğŸ“… HaftalÄ±k GÃ¶revler</h3>
                <div id="weekly-quests-list"></div>
            </div>
            <div class="quest-section">
                <h3 class="quest-section-title">â­ Ana GÃ¶revler</h3>
                <div id="main-quests-list"></div>
            </div>
        </section>
    </main>

    <!-- ===== BOTTOM NAV ===== -->
    <nav id="bottom-nav">
        <button class="nav-btn active" data-tab="buildings">
            <span class="nav-icon" id="nav-icon-buildings"></span>
            <span class="nav-label">Bina</span>
        </button>
        <button class="nav-btn" data-tab="heroes">
            <span class="nav-icon" id="nav-icon-heroes"></span>
            <span class="nav-label">Asker</span>
        </button>
        <button class="nav-btn" data-tab="upgrades">
            <span class="nav-icon" id="nav-icon-upgrades"></span>
            <span class="nav-label">GÃ¼Ã§</span>
        </button>
        <button class="nav-btn" data-tab="achievements">
            <span class="nav-icon" id="nav-icon-achievements"></span>
            <span class="nav-label">Ã–dÃ¼l</span>
        </button>
        <button class="nav-btn" data-tab="prestige">
            <span class="nav-icon" id="nav-icon-prestige"></span>
            <span class="nav-label">YÄ±ldÄ±z</span>
        </button>
        <button class="nav-btn" data-tab="quests">
            <span class="nav-icon" id="nav-icon-quests"></span>
            <span class="nav-label">GÃ¶rev</span>
        </button>
    </nav>

    <!-- ===== PRESTIGE OVERLAY ===== -->
    <div id="prestige-overlay" class="overlay hidden">
        <div class="overlay-content">
            <h2>â­ Prestige</h2>
            <p>KrallÄ±ÄŸÄ±nÄ± sÄ±fÄ±rla, kalÄ±cÄ± bonus kazan!</p>
            <div id="prestige-preview">
                <div class="prestige-stat">
                    <span>KazanÄ±lacak YÄ±ldÄ±z:</span>
                    <span id="prestige-earn">0</span>
                </div>
                <div class="prestige-stat">
                    <span>Yeni Ã‡arpan:</span>
                    <span id="prestige-new-mult">x1.00</span>
                </div>
            </div>
            <button id="btn-prestige" class="btn-gold" disabled>Prestige Yap</button>
            <button id="btn-prestige-close" class="btn-ghost">VazgeÃ§</button>
        </div>
    </div>

    <!-- ===== DAILY REWARD ===== -->
    <div id="daily-reward-overlay" class="hidden">
        <div id="daily-reward-content">
            <h2>ğŸ GÃ¼nlÃ¼k Ã–dÃ¼l</h2>
            <div class="daily-subtitle">Her gÃ¼n gir, daha bÃ¼yÃ¼k Ã¶dÃ¼ller kazan!</div>
            <div id="daily-streak-display">ğŸ”¥ 1. GÃ¼n Serisi</div>
            <div class="daily-days" id="daily-days">
                <!-- Dynamically filled -->
            </div>
            <button id="btn-daily-claim">Ã–dÃ¼lÃ¼ Al!</button>
        </div>
    </div>

    <!-- ===== KINGDOM NAMING OVERLAY ===== -->
    <div id="kingdom-name-overlay" class="overlay hidden">
        <div class="overlay-content kingdom-name-content">
            <div class="kingdom-name-crown">ğŸ‘‘</div>
            <h2>KrallÄ±ÄŸÄ±na Ä°sim Ver!</h2>
            <p>Bu topraklar artÄ±k senin. KrallÄ±ÄŸÄ±na layÄ±k bir isim seÃ§!</p>
            <input type="text" id="kingdom-name-input" maxlength="20" placeholder="KrallÄ±ÄŸÄ±nÄ±n adÄ±..." autocomplete="off">
            <div class="kingdom-name-preview">
                <span id="kingdom-name-preview-text">TÄ±kla Fethet</span>
            </div>
            <button id="btn-kingdom-name-ok" class="btn-gold">KrallÄ±ÄŸÄ±mÄ± Kur!</button>
            <button id="btn-kingdom-name-skip" class="btn-ghost">VarsayÄ±lan Kullan</button>
        </div>
    </div>

    <!-- ===== OFFLINE POPUP ===== -->
    <div id="offline-popup" class="overlay hidden">
        <div class="overlay-content">
            <h2>ğŸŒ™ HoÅŸgeldin!</h2>
            <p>Yokken kazandÄ±n:</p>
            <div id="offline-earnings" class="big-number">+0</div>
            <span id="offline-time">0 dakika</span>
            <button id="btn-offline-ok" class="btn-gold">Topla!</button>
        </div>
    </div>

    <!-- ===== CLOUD SAVE OVERLAY ===== -->
    <div id="cloud-save-overlay" class="overlay hidden">
        <div class="overlay-content cloud-save-content">
            <h2>â˜ï¸ Bulut KayÄ±t</h2>
            <p id="cloud-status">Kontrol ediliyor...</p>
            <div id="cloud-info"></div>
            <div class="cloud-pin-row">
                <label for="cloud-pin">ğŸ”‘ PIN (4 haneli):</label>
                <input type="password" id="cloud-pin" maxlength="4" inputmode="numeric" pattern="[0-9]*" placeholder="â€¢â€¢â€¢â€¢" autocomplete="off">
            </div>
            <div id="cloud-msg" class="cloud-msg"></div>
            <div class="cloud-actions">
                <button id="btn-cloud-upload" class="btn-gold">â¬†ï¸ Buluta Kaydet</button>
                <button id="btn-cloud-download" class="btn-ghost">â¬‡ï¸ Buluttan YÃ¼kle</button>
            </div>
            <div class="cloud-note">
                PIN'ini unutma! FarklÄ± cihazlardan aynÄ± kayda eriÅŸmek iÃ§in
                aynÄ± Player ID ve PIN kullan.
            </div>
            <div class="cloud-player-id">
                <small>Player ID: <span id="cloud-player-id-display"></span></small>
            </div>
            <button id="btn-cloud-close" class="btn-ghost cloud-close-btn">Kapat</button>
        </div>
    </div>

    <!-- ===== BOSS RESULT OVERLAY ===== -->
    <div id="boss-result-overlay" class="overlay hidden">
        <div class="overlay-content boss-result-content" id="boss-result-box">
            <div id="boss-result-icon"></div>
            <h2 id="boss-result-title"></h2>
            <p id="boss-result-desc"></p>
            <div id="boss-result-rewards"></div>
            <div id="boss-result-nearmiss" class="hidden"></div>
            <button id="btn-boss-result" class="btn-gold">Tamam</button>
        </div>
    </div>

    <!-- ===== FLOATING TEXTS CONTAINER ===== -->
    <div id="float-container"></div>

    <!-- ===== GOLD RAIN CANVAS ===== -->
    <canvas id="particle-canvas"></canvas>

    <script src="assets/icons.js?v=11"></script>
    <script src="game.js?v=11"></script>
    <script>
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('[PWA] SW registered:', reg.scope))
                    .catch(err => console.log('[PWA] SW registration failed:', err));
            });
        }
    </script>
</body>
</html>
